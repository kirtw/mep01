<!DOCTYPE html>
<html lang='en'>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>
^KGD
</title>
<style> 
.hd  {font-size: 2em;}
body  {font-size:100%;}
.cdline  {font-family: "Courier New", monospace;   font-size: 1em;}
.cdline  {display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-between; }
.cdrinum  {flex: 1;}
.cdlabel  {flex: 5;}
.cdmcmd  {flex: 94;}
.cdline  {white-space:pre-wrap; }
.cdmcmd  {text-indent:5px white-space:pre-wrap;}
.cdline  {background-color:gray}
.cdrinum  {background-color:gold; width:100px ; margin-right:5px}
.cdlabel  {background-color:lightblue}
.cdmcmd  {background-color:lightpink}
a  {margin:5px 0px 5px 0px;}
.brcln  {display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-between; }
a  {flex: 1;}
.blink  {flex: 1;}
.brcln  {white-space:pre-wrap; flex-wrap: wrap;}
.brcln  {font-size: 1.4em; font-family: "Courier New", monospace; }
.blink  {margin-left: 10px;margin-right: 10px;text-decoration: none;}
.blink  {padding-left: 5px; padding-right: 20px;border: black solid 1px;}
.blink  {background-color: lightpink;}
.cursor  {background-color:lightyellow;}
</style>
</head>
<body>
<div  class=hd >MRoutine Page ^KGD</div><a href=aa-TOC-All.zz2.html >TOC</a><div  class=brcln ><a href=aa-TOC-All.zz2.html >TOC</a><div  class=blink ><a href=RD-rmGP3.rd2.html >rmGP3/</a></div><div  class=blink ><a href=MR-KGD.mr2.html >^KGD</a></div><div  class=blink ><a href=./ >ww2m/*</a></div><div  class=blink ><a href=CB-KGD.cb2.html >^KGD</a></div><div  class=blink ><a href=CB-KGD-ERRgd.cb2.html >ERRgd</a></div><div  class=blink ><a href=CB-KGD-EXITgd.cb2.html >EXITgd</a></div><div  class=blink ><a href=CB-KGD-LOOPgd.cb2.html >LOOPgd</a></div><div  class=blink ><a href=CB-KGD-KGSEL.cb2.html >KGSEL</a></div><div  class=blink ><a href=CB-KGD-GD.cb2.html >GD</a></div><div  class=blink ><a href=CB-KGD-CALL.cb2.html >CALL</a></div><div  class=blink ><a href=CB-KGD-init.cb2.html >init</a></div><div  class=blink ><a href=CB-KGD-main.cb2.html >main</a></div><div  class=blink ><a href=CB-KGD-inter.cb2.html >inter</a></div><div  class=blink ><a href=CB-KGD-setup.cb2.html >setup</a></div><div  class=blink ><a href=CB-KGD-setup2.cb2.html >setup2</a></div><div  class=blink ><a href=CB-KGD-it.cb2.html >it</a></div><div  class=blink ><a href=CB-KGD-pat.cb2.html >pat</a></div><div  class=blink ><a href=CB-KGD-start.cb2.html >start</a></div><div  class=blink ><a href=CB-KGD-search.cb2.html >search</a></div><div  class=blink ><a href=CB-KGD-save.cb2.html >save</a></div><div  class=blink ><a href=CB-KGD-prt.cb2.html >prt</a></div><div  class=blink ><a href=CB-KGD-help.cb2.html >help</a></div><div  class=blink ><a href=CB-KGD-cur.cb2.html >cur</a></div><div  class=blink ><a href=CB-KGD-nonfatal.cb2.html >nonfatal</a></div><div  class=blink ><a href=CB-KGD-ERR.cb2.html >ERR</a></div><div  class=blink ><a href=CB-KGD-LOOP.cb2.html >LOOP</a></div><div  class=blink ><a href=CB-KGD-U257.cb2.html >U257</a></div><div  class=blink ><a href=CB-KGD-U258.cb2.html >U258</a></div></div><div  class=mcode ><div  class=cdline ><div  class=cdrinum >..1c</div><div  class=cdmcmd >KGD     ;CKW/ESC i26jul22  gmma/ rmGP3/ ;20220726-12; <a href=CB-gtIpg-gt.cb2.html >GT</a>.M %<a href=CB-KGD-GD.cb2.html >GD</a> utility - global directory</div></div><div  class=cdline ><div  class=cdrinum >..2c</div><div  class=cdmcmd >; mod from %<a href=CB-KGD-GD.cb2.html >GD</a>, %GSEL combined and non-interactive, hgen</div></div><div  class=cdline ><div  class=cdrinum >..3c</div><div  class=cdmcmd >        ;</div></div><div  class=cdline ><div  class=cdrinum >..4c</div><div  class=cdmcmd >        NEW %ZG,%ZL</div></div><div  class=cdline ><div  class=cdrinum >..5c</div><div  class=cdmcmd >        I '$D(%zdebug) NEW $et S $et="zg "_$zl_":ERRgd^KGD" USE $p:(ctrap=$c(3):exc="KILL %ZG ZG "_$ZL_":LOOPgd^KGD")</div></div><div  class=cdline ><div  class=cdrinum >..6c</div><div  class=cdmcmd >        W !,"Global Directory",!</div></div><div  class=cdline ><div  class=cdrinum >..7c</div><div  class=cdmcmd >        D GD^KGSEL,<a href=CB-KGD-EXITgd.cb2.html >EXITgd</a></div></div><div  class=cdline ><div  class=cdrinum >..8c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >..9c</div><div  class=cdmcmd ><a href=CB-KGD-ERRgd.cb2.html >ERRgd</a>     USE $P W !,$P($ZS,",",2,99),!</div></div><div  class=cdline ><div  class=cdrinum >.10c</div><div  class=cdmcmd >        S $ec=""</div></div><div  class=cdline ><div  class=cdrinum >.11c</div><div  class=cdmcmd >        ; Warning: Fall-through!</div></div><div  class=cdline ><div  class=cdrinum >.12c</div><div  class=cdmcmd ><a href=CB-KGD-EXITgd.cb2.html >EXITgd</a>    USE $p:(ctrap="":exc="")</div></div><div  class=cdline ><div  class=cdrinum >.13c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >.14c</div><div  class=cdmcmd ><a href=CB-KGD-LOOPgd.cb2.html >LOOPgd</a>    D GD^KGSEL,<a href=CB-KGD-EXITgd.cb2.html >EXITgd</a></div></div><div  class=cdline ><div  class=cdrinum >.15c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >.16c</div><div  class=cdmcmd >;*        </div></div><div  class=cdline ><div  class=cdrinum >.17c</div><div  class=cdmcmd ><a href=CB-KGD-KGSEL.cb2.html >KGSEL</a>   ;<a href=CB-gtIpg-gt.cb2.html >GT</a>.M %GSEL utility - global select into a local array</div></div><div  class=cdline ><div  class=cdrinum >.18c</div><div  class=cdmcmd >        ;invoke ^KGSEL to create %ZG - a local array of existing globals, interactively</div></div><div  class=cdline ><div  class=cdrinum >.19c</div><div  class=cdmcmd >        ;</div></div><div  class=cdline ><div  class=cdrinum >.20c</div><div  class=cdmcmd >        NEW add,beg,cnt,d,end,g,gd,gdf,k,out,<a href=CB-KGD-pat.cb2.html >pat</a>,stp,nfe</div></div><div  class=cdline ><div  class=cdrinum >.21c</div><div  class=cdmcmd >        D <a href=CB-KGD-init.cb2.html >init</a>,<a href=CB-ep4PAR-main.cb2.html >main</a></div></div><div  class=cdline ><div  class=cdrinum >.22c</div><div  class=cdmcmd >        USE:$D(d("use")) @d("use")</div></div><div  class=cdline ><div  class=cdrinum >.23c</div><div  class=cdmcmd >        USE:$D(d("io")) d("io")</div></div><div  class=cdline ><div  class=cdrinum >.24c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >.25c</div><div  class=cdmcmd ><a href=CB-KGD-GD.cb2.html >GD</a>      ;</div></div><div  class=cdline ><div  class=cdrinum >.26c</div><div  class=cdmcmd >        NEW add,beg,cnt,d,end,g,gd,gdf,k,out,<a href=CB-KGD-pat.cb2.html >pat</a>,stp,nfe</div></div><div  class=cdline ><div  class=cdrinum >.27c</div><div  class=cdmcmd >        S cnt=0,(out,gd,gdf)=1</div></div><div  class=cdline ><div  class=cdrinum >.28c</div><div  class=cdmcmd >        D <a href=CB-ep4PAR-main.cb2.html >main</a></div></div><div  class=cdline ><div  class=cdrinum >.29c</div><div  class=cdmcmd >        I gdf S %ZG="*" DO  ;</div></div><div  class=cdline ><div  class=cdrinum >.30c</div><div  class=cdmcmd >           .D <a href=CB-KGD-setup.cb2.html >setup</a>,<a href=CB-KGD-it.cb2.html >it</a> </div></div><div  class=cdline ><div  class=cdrinum >.31c</div><div  class=cdmcmd >           .W !,"Total of ",cnt," global",$S(cnt=1:".",1:"s."),!</div></div><div  class=cdline ><div  class=cdrinum >.32c</div><div  class=cdmcmd >        USE:$D(d("use")) @d("use")</div></div><div  class=cdline ><div  class=cdrinum >.33c</div><div  class=cdmcmd >        USE:$D(d("io")) d("io")</div></div><div  class=cdline ><div  class=cdrinum >.34c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >.35c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >.36c</div><div  class=cdmcmd ><a href=CB-KGD-CALL.cb2.html >CALL</a>    ;invoke <a href=CB-KGD-KGSEL.cb2.html >KGSEL</a> without clearing %ZG (%ZG stores the list of globals from <a href=CB-KGD-KGSEL.cb2.html >KGSEL</a> searches)</div></div><div  class=cdline ><div  class=cdrinum >.37c</div><div  class=cdmcmd >        NEW add,beg,cnt,d,end,g,gd,gdf,k,out,<a href=CB-KGD-pat.cb2.html >pat</a>,stp,nfe</div></div><div  class=cdline ><div  class=cdrinum >.38c</div><div  class=cdmcmd >        S (cnt,gd)=0</div></div><div  class=cdline ><div  class=cdrinum >.39c</div><div  class=cdmcmd >        I $D(%ZG)&gt;1 S g="" FOR  S g=$O(%ZG(g)) Q:'$L(g)  S cnt=cnt+1</div></div><div  class=cdline ><div  class=cdrinum >.40c</div><div  class=cdmcmd >        I $G(%ZG)'?.N S out=0 D <a href=CB-KGD-setup.cb2.html >setup</a>,<a href=CB-KGD-it.cb2.html >it</a> S %ZG=cnt Q</div></div><div  class=cdline ><div  class=cdrinum >.41c</div><div  class=cdmcmd >        S out=1</div></div><div  class=cdline ><div  class=cdrinum >.42c</div><div  class=cdmcmd >        D <a href=CB-ep4PAR-main.cb2.html >main</a></div></div><div  class=cdline ><div  class=cdrinum >.43c</div><div  class=cdmcmd >        USE:$D(d("use")) @d("use")</div></div><div  class=cdline ><div  class=cdrinum >.44c</div><div  class=cdmcmd >        USE:$D(d("io")) d("io")</div></div><div  class=cdline ><div  class=cdrinum >.45c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >.46c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >.47c</div><div  class=cdmcmd ><a href=CB-KGD-init.cb2.html >init</a>    ;</div></div><div  class=cdline ><div  class=cdrinum >.48c</div><div  class=cdmcmd >        KILL %ZG</div></div><div  class=cdline ><div  class=cdrinum >.49c</div><div  class=cdmcmd >        S (cnt,gd)=0,out=1</div></div><div  class=cdline ><div  class=cdrinum >.50c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >.51c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >.52c</div><div  class=cdmcmd ><a href=CB-ep4PAR-main.cb2.html >main</a>    ;</div></div><div  class=cdline ><div  class=cdrinum >.53c</div><div  class=cdmcmd >        S d("io")=$IO</div></div><div  class=cdline ><div  class=cdrinum >.54c</div><div  class=cdmcmd >        I '$D(%zdebug) NEW $ETRAP S $ETRAP="ZGOTO "_$ZL_":ERR^"_$T(+0) DO  ;</div></div><div  class=cdline ><div  class=cdrinum >.55c</div><div  class=cdmcmd >        . NEW x</div></div><div  class=cdline ><div  class=cdrinum >.56c</div><div  class=cdmcmd >        . ZSHOW "d":d       ; <a href=CB-KGD-save.cb2.html >save</a> original $p settings</div></div><div  class=cdline ><div  class=cdrinum >.57c</div><div  class=cdmcmd >        . S x=$P($P(d("D",1),"CTRA=",2)," ")</div></div><div  class=cdline ><div  class=cdrinum >.58c</div><div  class=cdmcmd >        . S:""=x x=""""""</div></div><div  class=cdline ><div  class=cdrinum >.59c</div><div  class=cdmcmd >        . S d("use")="$P:(CTRAP="_x_":EXCEPTION=",x=$P(d("D",1),"EXCE=",2),x=$<a href=CB-dv-zwr.cb2.html >ZWR</a>($E(x,2,$L(x)-1))</div></div><div  class=cdline ><div  class=cdrinum >.60c</div><div  class=cdmcmd >        . S:""=x x=""""""</div></div><div  class=cdline ><div  class=cdrinum >.61c</div><div  class=cdmcmd >        . S d("use")=d("use")_x_":"_$S($F(d("D",1),"NOCENE"):"NOCENABLE",1:"CENABLE")_")"</div></div><div  class=cdline ><div  class=cdrinum >.62c</div><div  class=cdmcmd >        . USE $P:(CTRAP=$C(3,4):EXCEPTION="":NOCENABLE)</div></div><div  class=cdline ><div  class=cdrinum >.63c</div><div  class=cdmcmd >        FOR  D <a href=CB-KGD-inter.cb2.html >inter</a> Q:'$L(%ZG)  ; Q:%ZG=""</div></div><div  class=cdline ><div  class=cdrinum >.64c</div><div  class=cdmcmd >        S %ZG=cnt</div></div><div  class=cdline ><div  class=cdrinum >.65c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >.66c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >.67c</div><div  class=cdmcmd ><a href=CB-KGD-inter.cb2.html >inter</a>   ;</div></div><div  class=cdline ><div  class=cdrinum >.68c</div><div  class=cdmcmd >        S nfe=0</div></div><div  class=cdline ><div  class=cdrinum >.69c</div><div  class=cdmcmd >        READ !,"Global ^",%ZG,! Q:'$L(%ZG)</div></div><div  class=cdline ><div  class=cdrinum >.70c</div><div  class=cdmcmd >        I $E(%ZG)="?",$L(%ZG)=1 D <a href=CB-KGD-help.cb2.html >help</a> Q</div></div><div  class=cdline ><div  class=cdrinum >.71c</div><div  class=cdmcmd >        I (%ZG="?D")!(%ZG="?d") D <a href=CB-KGD-cur.cb2.html >cur</a> Q</div></div><div  class=cdline ><div  class=cdrinum >.72c</div><div  class=cdmcmd >        I $E(%ZG)="?" S nfe=1 D <a href=CB-KGD-nonfatal.cb2.html >nonfatal</a> Q</div></div><div  class=cdline ><div  class=cdrinum >.73c</div><div  class=cdmcmd >        D <a href=CB-KGD-setup.cb2.html >setup</a> I nfe&gt;0 S nfe=0,gdf=0 Q</div></div><div  class=cdline ><div  class=cdrinum >.74c</div><div  class=cdmcmd >        D <a href=CB-KGD-it.cb2.html >it</a></div></div><div  class=cdline ><div  class=cdrinum >.75c</div><div  class=cdmcmd >        W !,$S(gd:"T",1:"Current t"),"otal of ",cnt," global",$S(cnt=1:".",1:"s."),!</div></div><div  class=cdline ><div  class=cdrinum >.76c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >.77c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >.78c</div><div  class=cdmcmd ><a href=CB-KGD-setup.cb2.html >setup</a>   ;Handles the <a href=CB-KG0-base.cb2.html >base</a> case of no range</div></div><div  class=cdline ><div  class=cdrinum >.79c</div><div  class=cdmcmd >        NEW g1,et</div></div><div  class=cdline ><div  class=cdrinum >.80c</div><div  class=cdmcmd >        I gd S add=1,cnt=0,g=%ZG KILL %ZG S %ZG=g</div></div><div  class=cdline ><div  class=cdrinum >.81c</div><div  class=cdmcmd >        ELSE  I "'-"[$E(%ZG) S add=0,g=$E(%ZG,2,999)</div></div><div  class=cdline ><div  class=cdrinum >.82c</div><div  class=cdmcmd >        ELSE  S add=1,g=%ZG</div></div><div  class=cdline ><div  class=cdrinum >.83c</div><div  class=cdmcmd >        S g1=$<a href=CB-dzIzro-TR.cb2.html >TR</a>(g,"?%*","aaa") ;Substitute wildcards for valid characters</div></div><div  class=cdline ><div  class=cdrinum >.84c</div><div  class=cdmcmd >        DO  ;</div></div><div  class=cdline ><div  class=cdrinum >.85c</div><div  class=cdmcmd >        . S et=$ETRAP NEW $ETRAP,$ESTACK S $ETRAP="S $ECODE="""",$ETRAP=et D setup2",g1=$QSUBSCRIPT(g1,1)</div></div><div  class=cdline ><div  class=cdrinum >.86c</div><div  class=cdmcmd >        . S:$F(g,"(")'=0 $E(g,$F(g,"(")-1,$L(g))=""</div></div><div  class=cdline ><div  class=cdrinum >.87c</div><div  class=cdmcmd >        . S:$E(g)="^" $E(g)=""</div></div><div  class=cdline ><div  class=cdrinum >.88c</div><div  class=cdmcmd >        I "?"=$E(g,$F(g,":")) S nfe=1 D <a href=CB-KGD-nonfatal.cb2.html >nonfatal</a> Q</div></div><div  class=cdline ><div  class=cdrinum >.89c</div><div  class=cdmcmd >        S g=$<a href=CB-dzIzro-TR.cb2.html >TR</a>(g,"?","%"),beg=$P(g,":",1),end=$P(g,":",2)</div></div><div  class=cdline ><div  class=cdrinum >.90c</div><div  class=cdmcmd >        I end=beg S end=""</div></div><div  class=cdline ><div  class=cdrinum >.91c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >.92c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >.93c</div><div  class=cdmcmd ><a href=CB-KGD-setup2.cb2.html >setup2</a>  ;Handles the case of a range argument</div></div><div  class=cdline ><div  class=cdrinum >.94c</div><div  class=cdmcmd >        NEW p,q,x,di,beg1</div></div><div  class=cdline ><div  class=cdrinum >.95c</div><div  class=cdmcmd >        S p=$L(g1,":")</div></div><div  class=cdline ><div  class=cdrinum >.96c</div><div  class=cdmcmd >        I p&lt;2 S nfe=2 D <a href=CB-KGD-nonfatal.cb2.html >nonfatal</a> Q</div></div><div  class=cdline ><div  class=cdrinum >.97c</div><div  class=cdmcmd >        ELSE  I p&gt;2 S q=$L(g1,"""")-1 F x=2:2:q S $P(g1,"""",x)=$<a href=CB-dzIzro-TR.cb2.html >TR</a>($P(g1,"""",x),":","a")</div></div><div  class=cdline ><div  class=cdrinum >.98c</div><div  class=cdmcmd >        DO  ;</div></div><div  class=cdline ><div  class=cdrinum >.99c</div><div  class=cdmcmd >        . S beg=$P(g1,":",1),end=$P(g1,":",2)</div></div><div  class=cdline ><div  class=cdrinum >100c</div><div  class=cdmcmd >        . NEW $ETRAP,$ESTACK S $ETRAP="S nfe=2 D nonfatal",beg1=$QSUBSCRIPT(beg,0),end=$QSUBSCRIPT(end,0)</div></div><div  class=cdline ><div  class=cdrinum >101c</div><div  class=cdmcmd >        Q:nfe&gt;0</div></div><div  class=cdline ><div  class=cdrinum >102c</div><div  class=cdmcmd >        S di=$L(beg),beg=$E(g,1,di),end=$E(g,di+2,$L(g))</div></div><div  class=cdline ><div  class=cdrinum >103c</div><div  class=cdmcmd >        S:$F(beg,"(")'=0 $E(beg,$F(beg,"(")-1,$L(beg))=""</div></div><div  class=cdline ><div  class=cdrinum >104c</div><div  class=cdmcmd >        S:$E(beg)="^" $E(beg)=""</div></div><div  class=cdline ><div  class=cdrinum >105c</div><div  class=cdmcmd >        S:$F(end,"(")'=0 $E(end,$F(end,"(")-1,$L(end))=""</div></div><div  class=cdline ><div  class=cdrinum >106c</div><div  class=cdmcmd >        S:$E(end)="^" $E(end)=""</div></div><div  class=cdline ><div  class=cdrinum >107c</div><div  class=cdmcmd >        S g=beg_":"_end</div></div><div  class=cdline ><div  class=cdrinum >108c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >109c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >110c</div><div  class=cdmcmd ><a href=CB-KGD-it.cb2.html >it</a>      ;</div></div><div  class=cdline ><div  class=cdrinum >111c</div><div  class=cdmcmd >        S gdf=0</div></div><div  class=cdline ><div  class=cdrinum >112c</div><div  class=cdmcmd >        I end'?."*",end']beg Q</div></div><div  class=cdline ><div  class=cdrinum >113c</div><div  class=cdmcmd >        S g=beg D <a href=CB-KGD-pat.cb2.html >pat</a></div></div><div  class=cdline ><div  class=cdrinum >114c</div><div  class=cdmcmd >        I <a href=CB-KGD-pat.cb2.html >pat</a>["""" D <a href=CB-KGD-start.cb2.html >start</a> FOR  D <a href=CB-KGD-search.cb2.html >search</a> Q:'$L(g)  D <a href=CB-KGD-save.cb2.html >save</a></div></div><div  class=cdline ><div  class=cdrinum >115c</div><div  class=cdmcmd >        I <a href=CB-KGD-pat.cb2.html >pat</a>["""",'$L(end) Q</div></div><div  class=cdline ><div  class=cdrinum >116c</div><div  class=cdmcmd >        S beg=stp</div></div><div  class=cdline ><div  class=cdrinum >117c</div><div  class=cdmcmd >        S:'$L(g) g=stp</div></div><div  class=cdline ><div  class=cdrinum >118c</div><div  class=cdmcmd >        S <a href=CB-KGD-pat.cb2.html >pat</a>=".E",stp="^"_$E(end)_$<a href=CB-dzIzro-TR.cb2.html >TR</a>($E(end,2,9999),"%","z")</div></div><div  class=cdline ><div  class=cdrinum >119c</div><div  class=cdmcmd >        D <a href=CB-KGD-start.cb2.html >start</a> FOR  D <a href=CB-KGD-search.cb2.html >search</a> Q:'$L(g)  D <a href=CB-KGD-save.cb2.html >save</a></div></div><div  class=cdline ><div  class=cdrinum >120c</div><div  class=cdmcmd >        S g=end D <a href=CB-KGD-pat.cb2.html >pat</a></div></div><div  class=cdline ><div  class=cdrinum >121c</div><div  class=cdmcmd >        I <a href=CB-KGD-pat.cb2.html >pat</a>["""" S:beg]g g=beg D <a href=CB-KGD-start.cb2.html >start</a> FOR  D <a href=CB-KGD-search.cb2.html >search</a> Q:'$L(g)  D <a href=CB-KGD-save.cb2.html >save</a></div></div><div  class=cdline ><div  class=cdrinum >122c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >123c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >124c</div><div  class=cdmcmd ><a href=CB-KGD-pat.cb2.html >pat</a>     ;</div></div><div  class=cdline ><div  class=cdrinum >125c</div><div  class=cdmcmd >        NEW tmpstp</div></div><div  class=cdline ><div  class=cdrinum >126c</div><div  class=cdmcmd >        S:"%"=$E(g) g="!"_$E(g,2,9999)</div></div><div  class=cdline ><div  class=cdrinum >127c</div><div  class=cdmcmd >        S <a href=CB-KGD-pat.cb2.html >pat</a>=g</div></div><div  class=cdline ><div  class=cdrinum >128c</div><div  class=cdmcmd >        FOR  Q:$L(g,"%")&lt;2  DO  ;</div></div><div  class=cdline ><div  class=cdrinum >129c</div><div  class=cdmcmd >        .S g=$P(g,"%",1)_"#"_$P(g,"%",2,999),<a href=CB-KGD-pat.cb2.html >pat</a>=$P(<a href=CB-KGD-pat.cb2.html >pat</a>,"%",1)_"""1E1"""_$P(<a href=CB-KGD-pat.cb2.html >pat</a>,"%",2,999)</div></div><div  class=cdline ><div  class=cdrinum >130c</div><div  class=cdmcmd >        FOR  Q:$L(g,"*")&lt;2  DO  ;</div></div><div  class=cdline ><div  class=cdrinum >131c</div><div  class=cdmcmd >        .S g=$P(g,"*",1)_"$"_$P(g,"*",2,999),<a href=CB-KGD-pat.cb2.html >pat</a>=$P(<a href=CB-KGD-pat.cb2.html >pat</a>,"*",1)_""".E1"""_$P(<a href=CB-KGD-pat.cb2.html >pat</a>,"*",2,999)</div></div><div  class=cdline ><div  class=cdrinum >132c</div><div  class=cdmcmd >        S:"!"=$E(g) g="%"_$E(g,2,9999),<a href=CB-KGD-pat.cb2.html >pat</a>="%"_$E(<a href=CB-KGD-pat.cb2.html >pat</a>,2,9999)</div></div><div  class=cdline ><div  class=cdrinum >133c</div><div  class=cdmcmd >        I <a href=CB-KGD-pat.cb2.html >pat</a>["""" S <a href=CB-KGD-pat.cb2.html >pat</a>="1""^"_<a href=CB-KGD-pat.cb2.html >pat</a>_""""</div></div><div  class=cdline ><div  class=cdrinum >134c</div><div  class=cdmcmd >        S tmpstp="z",$P(tmpstp,"z",30)="z"</div></div><div  class=cdline ><div  class=cdrinum >135c</div><div  class=cdmcmd >        S g="^"_$P($P(g,"#"),"$"),stp=g_$E(tmpstp,$L(g)-1,31)</div></div><div  class=cdline ><div  class=cdrinum >136c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >137c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >138c</div><div  class=cdmcmd ><a href=CB-KGD-start.cb2.html >start</a>   ;</div></div><div  class=cdline ><div  class=cdrinum >139c</div><div  class=cdmcmd >        S:"^"=g g="^%"</div></div><div  class=cdline ><div  class=cdrinum >140c</div><div  class=cdmcmd >        I g?@<a href=CB-KGD-pat.cb2.html >pat</a>,$D(@g) D <a href=CB-KGD-save.cb2.html >save</a></div></div><div  class=cdline ><div  class=cdrinum >141c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >142c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >143c</div><div  class=cdmcmd ><a href=CB-KGD-search.cb2.html >search</a>  ;</div></div><div  class=cdline ><div  class=cdrinum >144c</div><div  class=cdmcmd >        FOR  S g=$O(@g) S:g]stp g="" Q:g?@pat!'$L(g)  ;Q:g=""  Q:g?@<a href=CB-KGD-pat.cb2.html >pat</a></div></div><div  class=cdline ><div  class=cdrinum >145c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >146c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >147c</div><div  class=cdmcmd ><a href=CB-KGD-save.cb2.html >save</a>    ;</div></div><div  class=cdline ><div  class=cdrinum >148c</div><div  class=cdmcmd >        I add,'$D(%ZG(g)) S %ZG(g)="",cnt=cnt+1 D <a href=CB-KGD-prt.cb2.html >prt</a>:out</div></div><div  class=cdline ><div  class=cdrinum >149c</div><div  class=cdmcmd >        I 'add,$D(%ZG(g)) KILL %ZG(g) S cnt=cnt-1 D <a href=CB-KGD-prt.cb2.html >prt</a>:out</div></div><div  class=cdline ><div  class=cdrinum >150c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >151c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >152c</div><div  class=cdmcmd ><a href=CB-KGD-prt.cb2.html >prt</a>     ;</div></div><div  class=cdline ><div  class=cdrinum >153c</div><div  class=cdmcmd >        W:$X&gt;70 ! W g,?$X\10+1*10</div></div><div  class=cdline ><div  class=cdrinum >154c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >155c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >156c</div><div  class=cdmcmd ><a href=CB-KGD-help.cb2.html >help</a>    ;</div></div><div  class=cdline ><div  class=cdrinum >157c</div><div  class=cdmcmd >        W !,?2,"&lt;RET&gt;",?25,"to leave",!,?2,"""*""",?25,"for all"</div></div><div  class=cdline ><div  class=cdrinum >158c</div><div  class=cdmcmd >        W !,?2,"global",?25,"for 1 global"</div></div><div  class=cdline ><div  class=cdrinum >159c</div><div  class=cdmcmd >        W !,?2,"global1:global2",?25,"for a range"</div></div><div  class=cdline ><div  class=cdrinum >160c</div><div  class=cdmcmd >        W !,?2,"""*"" <a href=CB-dzroz-as.cb2.html >as</a> a wildcard",?25,"permitting any number of characters"</div></div><div  class=cdline ><div  class=cdrinum >161c</div><div  class=cdmcmd >        W !,?2,"""%"" <a href=CB-dzroz-as.cb2.html >as</a> a wildcard",?25,"for a single character in positions other than the first"</div></div><div  class=cdline ><div  class=cdrinum >162c</div><div  class=cdmcmd >        W !,?2,"""?"" <a href=CB-dzroz-as.cb2.html >as</a> a wildcard",?25,"for a single character in positions other than the first"</div></div><div  class=cdline ><div  class=cdrinum >163c</div><div  class=cdmcmd >        Q:gd</div></div><div  class=cdline ><div  class=cdrinum >164c</div><div  class=cdmcmd >        W !,?2,"""'"" <a href=CB-dzroz-as.cb2.html >as</a> the 1st character",!,?25,"to remove globals from the list"</div></div><div  class=cdline ><div  class=cdrinum >165c</div><div  class=cdmcmd >        W !,?2,"?D",?25,"for the currently selected globals",!</div></div><div  class=cdline ><div  class=cdrinum >166c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >167c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >168c</div><div  class=cdmcmd ><a href=CB-KGD-cur.cb2.html >cur</a>     ;</div></div><div  class=cdline ><div  class=cdrinum >169c</div><div  class=cdmcmd >        S g=""</div></div><div  class=cdline ><div  class=cdrinum >170c</div><div  class=cdmcmd >        FOR  S g=$O(%ZG(g)) Q:'$L(g)  W:$X&gt;70 ! W g,?($X\10+1*10)</div></div><div  class=cdline ><div  class=cdrinum >171c</div><div  class=cdmcmd >        W !,$S(gd:"T",1:"Current t"),"otal of ",cnt," global",$S(cnt=1:".",1:"s."),!</div></div><div  class=cdline ><div  class=cdrinum >172c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >173c</div><div  class=cdmcmd >        I gd W "Total of ",cnt," MGlobal"</div></div><div  class=cdline ><div  class=cdrinum >174c</div><div  class=cdmcmd >        E   W "Current total of ",cnt," MGlobal"</div></div><div  class=cdline ><div  class=cdrinum >175c</div><div  class=cdmcmd >        W:cnt&gt;1 "s"  W ".",!</div></div><div  class=cdline ><div  class=cdrinum >176c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >177c</div><div  class=cdmcmd ><a href=CB-KGD-nonfatal.cb2.html >nonfatal</a></div></div><div  class=cdline ><div  class=cdrinum >178c</div><div  class=cdmcmd >        NEW ecde</div></div><div  class=cdline ><div  class=cdrinum >179c</div><div  class=cdmcmd >        S $ECODE=""</div></div><div  class=cdline ><div  class=cdrinum >180c</div><div  class=cdmcmd >        I nfe=1 S ecde="U257"</div></div><div  class=cdline ><div  class=cdrinum >181c</div><div  class=cdmcmd >        ELSE  I nfe=2 S ecde="U258"</div></div><div  class=cdline ><div  class=cdrinum >182c</div><div  class=cdmcmd >        W $T(+0),@$P($T(@ecde),";",2),!</div></div><div  class=cdline ><div  class=cdrinum >183c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >184c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >185c</div><div  class=cdmcmd ><a href=CB-TOItes-ERR.cb2.html >ERR</a>     ;</div></div><div  class=cdline ><div  class=cdrinum >186c</div><div  class=cdmcmd >        USE:$D(d("use")) @d("use")</div></div><div  class=cdline ><div  class=cdrinum >187c</div><div  class=cdmcmd >        USE:$D(d("io")) d("io")</div></div><div  class=cdline ><div  class=cdrinum >188c</div><div  class=cdmcmd >        S $ECODE=""</div></div><div  class=cdline ><div  class=cdrinum >189c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >190c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >191c</div><div  class=cdmcmd ><a href=CB-KGD-LOOP.cb2.html >LOOP</a></div></div><div  class=cdline ><div  class=cdrinum >192c</div><div  class=cdmcmd >        D <a href=CB-ep4PAR-main.cb2.html >main</a></div></div><div  class=cdline ><div  class=cdrinum >193c</div><div  class=cdmcmd >        USE $P:(ctrap=$CHAR(3,4):exc="")</div></div><div  class=cdline ><div  class=cdrinum >194c</div><div  class=cdmcmd >        Q</div></div><div  class=cdline ><div  class=cdrinum >195c</div><div  class=cdmcmd > </div></div><div  class=cdline ><div  class=cdrinum >196c</div><div  class=cdmcmd >;       Error message texts</div></div><div  class=cdline ><div  class=cdrinum >197c</div><div  class=cdmcmd ><a href=CB-KGD-U257.cb2.html >U257</a>    ;"-E-ILLEGALUSE Illegal use of ""?"". Only valid <a href=CB-dzroz-as.cb2.html >as</a> 1st character when ""?D"" or ""?d"""</div></div><div  class=cdline ><div  class=cdrinum >198c</div><div  class=cdmcmd ><a href=CB-TOIT2.cb2.html >U258</a>    ;"-E-INVALIDGBL <a href=CB-KGD-search.cb2.html >Search</a> string either uses invalid characters or is improperly formated"</div></div><div  class=cdline ><div  class=cdrinum >199c</div><div  class=cdmcmd ></div></div></div><div  class=ft >by ^mwHmr 28 APR 2023 03:28 AM</div><h3> 28APR2023 03:28   by ^hgh</h3>
</body>
</html>
