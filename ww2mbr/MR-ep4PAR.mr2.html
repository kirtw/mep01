<!DOCTYPE html>
<html lang='en'>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>
^ep4PAR
</title>
<style> 
.hd  {font-size: 2em;}
body  {font-size:100%;}
.cdline  {font-family: "Courier New", monospace;   font-size: 1em;}
.cdline  {display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-between; }
.cdrinum  {flex: 1;}
.cdlabel  {flex: 5;}
.cdmcmd  {flex: 94;}
.cdline  {white-space:pre-wrap; }
.cdmcmd  {text-indent:5px white-space:pre-wrap;}
.cdline  {background-color:gray}
.cdrinum  {background-color:gold; width:100px ; margin-right:5px}
.cdlabel  {background-color:lightblue}
.cdmcmd  {background-color:lightpink}
a  {margin:5px 0px 5px 0px;}
.brcln  {display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-between; }
a  {flex: 1;}
.blink  {flex: 1;}
.brcln  {white-space:pre-wrap; flex-wrap: wrap;}
.brcln  {font-size: 1.4em; font-family: "Courier New", monospace; }
.blink  {margin-left: 10px;margin-right: 10px;text-decoration: none;}
.blink  {padding-left: 5px; padding-right: 20px;border: black solid 1px;}
.blink  {background-color: lightpink;}
.cursor  {background-color:lightyellow;}
</style>
</head>
<body>
<div  class=hd >MRoutine Page ^ep4PAR</div><a href=aa-TOC-All.zz2.html >TOC</a><div  class=brcln ><a href=aa-TOC-All.zz2.html >TOC</a><div  class=blink ><a href=RD-rmep4.rd2.html >rmep4/</a></div><div  class=blink ><a href=MR-ep4PAR.mr2.html >^ep4PAR</a></div><div  class=blink ><a href=./ >ww2m/*</a></div><div  class=blink ><a href=CB-ep4PAR.cb2.html >^ep4PAR</a></div><div  class=blink ><a href=CB-ep4PAR-top.cb2.html >top</a></div><div  class=blink ><a href=CB-ep4PAR-main.cb2.html >main</a></div><div  class=blink ><a href=CB-ep4PAR-BI1.cb2.html >BI1</a></div><div  class=blink ><a href=CB-ep4PAR-EL2.cb2.html >EL2</a></div><div  class=blink ><a href=CB-ep4PAR-PRED.cb2.html >PRED</a></div><div  class=blink ><a href=CB-ep4PAR-NwP.cb2.html >NwP</a></div><div  class=blink ><a href=CB-ep4PAR-FLg4.cb2.html >FLg4</a></div><div  class=blink ><a href=CB-ep4PAR-FLi4.cb2.html >FLi4</a></div><div  class=blink ><a href=CB-ep4PAR-SCAN.cb2.html >SCAN</a></div><div  class=blink ><a href=CB-ep4PAR-TMch.cb2.html >TMch</a></div><div  class=blink ><a href=CB-ep4PAR-FLg3.cb2.html >FLg3</a></div><div  class=blink ><a href=CB-ep4PAR-FLi3.cb2.html >FLi3</a></div><div  class=blink ><a href=CB-ep4PAR-COMPLETE.cb2.html >COMPLETE</a></div><div  class=blink ><a href=CB-ep4PAR-FLg2.cb2.html >FLg2</a></div><div  class=blink ><a href=CB-ep4PAR-FLi2.cb2.html >FLi2</a></div><div  class=blink ><a href=CB-ep4PAR-SSC.cb2.html >SSC</a></div><div  class=blink ><a href=CB-ep4PAR-REX.cb2.html >REX</a></div><div  class=blink ><a href=CB-ep4PAR-MEX.cb2.html >MEX</a></div><div  class=blink ><a href=CB-ep4PAR-TEX.cb2.html >TEX</a></div><div  class=blink ><a href=CB-ep4PAR-PZE.cb2.html >PZE</a></div><div  class=blink ><a href=CB-ep4PAR-initSC.cb2.html >initSC</a></div></div><div  class=mcode ><div  class=cdline ><div  class=cdrinum >..1c</div><div  class=cdmcmd >ep4PAR  ;CKW/ESC i31oct22 ;20230111-45;Parse Trial IX exploration</div></div><div  class=cdline ><div  class=cdrinum >..2c</div><div  class=cdmcmd >;</div></div><div  class=cdline ><div  class=cdrinum >..3c</div><div  class=cdmcmd >;  Iabe(ruab,IPe,SSq)=ikey</div></div><div  class=cdline ><div  class=cdrinum >..4c</div><div  class=cdmcmd >;  ISi(IPe,runa)=ikey</div></div><div  class=cdline ><div  class=cdrinum >..5c</div><div  class=cdmcmd >;</div></div><div  class=cdline ><div  class=cdrinum >..6c</div><div  class=cdmcmd >;  GRi(ruid)</div></div><div  class=cdline ><div  class=cdrinum >..7c</div><div  class=cdmcmd >;  Gxi(&lt;rule-name&gt;,gi)=isq  ;  ~ left-hand-side name index, mult rules, gi</div></div><div  class=cdline ><div  class=cdrinum >..8c</div><div  class=cdmcmd >;</div></div><div  class=cdline ><div  class=cdrinum >..9c</div><div  class=cdmcmd >;  INc(Ip)=literal input chars, from Ins, a string of chars</div></div><div  class=cdline ><div  class=cdrinum >.10c</div><div  class=cdmcmd >;</div></div><div  class=cdline ><div  class=cdrinum >.11c</div><div  class=cdmcmd >;  SCF items or rules (aka dotted-rule, item, )</div></div><div  class=cdline ><div  class=cdrinum >.12c</div><div  class=cdmcmd >;   <a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>:   _5 is <a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a> a comma list of tokens- rule-names or terminal-set-names)</div></div><div  class=cdline ><div  class=cdrinum >.13c</div><div  class=cdmcmd >;   dot:  a ptr into the current <a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a> comma pieces</div></div><div  class=cdline ><div  class=cdrinum >.14c</div><div  class=cdmcmd >;   Ips   is the input <a href=CB-KGD-start.cb2.html >start</a> pointer, Ips, into Ins (~input)</div></div><div  class=cdline ><div  class=cdrinum >.15c</div><div  class=cdmcmd >;   IPe   is the end-ptr into Ins, implicitly==Si in Lua</div></div><div  class=cdline ><div  class=cdrinum >.16c</div><div  class=cdmcmd >;   ruby</div></div><div  class=cdline ><div  class=cdrinum >.17c</div><div  class=cdmcmd >;   frm  What function created  {<a href=CB-ep4PAR-PRED.cb2.html >PRED</a>, <a href=CB-ep4PAR-SCAN.cb2.html >SCAN</a>, COMP, <a href=CB-hgh-Init.cb2.html >Init</a> }</div></div><div  class=cdline ><div  class=cdrinum >.18c</div><div  class=cdmcmd >;   ruC   Input chars consumed between IPs &amp; IPe</div></div><div  class=cdline ><div  class=cdrinum >.19c</div><div  class=cdmcmd >;    </div></div><div  class=cdline ><div  class=cdrinum >.20c</div><div  class=cdmcmd ><a href=CB-kfmUafl-top.cb2.html >top</a>    W !!,"Magic:  Parsing !"</div></div><div  class=cdline ><div  class=cdrinum >.21c</div><div  class=cdmcmd >       ;; {<a href=CB-dgTES-I1.cb2.html >I1</a>,BLp1,BLp2,COM,tokR1,<a href=CB-ep4PAR-SSC.cb2.html >SSC</a>,RejDup,SCs,SCse}</div></div><div  class=cdline ><div  class=cdrinum >.22c</div><div  class=cdmcmd >       S Wmo="SSC,RejDup,SCs,SCse"  ;</div></div><div  class=cdline ><div  class=cdrinum >.23c</div><div  class=cdmcmd >         S Sei=2,Sej=2 ; Bloop pre/post Break/Stop  - debug</div></div><div  class=cdline ><div  class=cdrinum >.24c</div><div  class=cdmcmd >       ;     </div></div><div  class=cdline ><div  class=cdrinum >.25c</div><div  class=cdmcmd >       D <a href=CB-ep4PAR-main.cb2.html >main</a></div></div><div  class=cdline ><div  class=cdrinum >.26c</div><div  class=cdmcmd >       D Wmdk^ep4W  ; Full Table HGen to mep-...mdk in dmep/</div></div><div  class=cdline ><div  class=cdrinum >.27c</div><div  class=cdmcmd >       I $G(<a href=CB-devIO-devlog.cb2.html >devlog</a>)'="" USE $P D WSC^ep4W  ; also to $P</div></div><div  class=cdline ><div  class=cdrinum >.28c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >.29c</div><div  class=cdmcmd >       ;</div></div><div  class=cdline ><div  class=cdrinum >.30c</div><div  class=cdmcmd ><a href=CB-ep4PAR-main.cb2.html >main</a>   ; loop thru INputs, Ip BUILD analog</div></div><div  class=cdline ><div  class=cdrinum >.31c</div><div  class=cdmcmd >       D <a href=CB-ep4PAR-initSC.cb2.html >initSC</a> ; KILL Arrays, SSq=0, First two items into SCF</div></div><div  class=cdline ><div  class=cdrinum >.32c</div><div  class=cdmcmd >        ;</div></div><div  class=cdline ><div  class=cdrinum >.33c</div><div  class=cdmcmd >       F Sbi=1:1 Q:$D(SCF(Sbi))=0  DO  ;</div></div><div  class=cdline ><div  class=cdrinum >.34c</div><div  class=cdmcmd >         .I Wmo["BLp1" W !!,"BUILD Outer Loop1 [",Sbi,"] ",!</div></div><div  class=cdline ><div  class=cdrinum >.35c</div><div  class=cdmcmd >         .F Sbj=1:1 Q:$D(SCF(Sbi,Sbj))=0   D <a href=CB-ep4PAR-BI1.cb2.html >BI1</a>  D <a href=CB-ep4PAR-EL2.cb2.html >EL2</a> ;</div></div><div  class=cdline ><div  class=cdrinum >.36c</div><div  class=cdmcmd >       I Wmo["BLp1" W:$X ! W "End BUILD Outer Loop1 [",Sbi,"] ",!</div></div><div  class=cdline ><div  class=cdrinum >.37c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >.38c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >.39c</div><div  class=cdmcmd >;;<a href=CB-epaIMG-grFL.cb2.html >grFL</a>:runa,ruab,rugi,ruty,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,nLst,tokCL,nLCL,Lna,rude_GRk(ruid)</div></div><div  class=cdline ><div  class=cdrinum >.40c</div><div  class=cdmcmd >;;<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>:runa,ruab,ruid,ikey,SSq,IPs,IPe,dot,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,tokR1,tokTy,ruby,frm_SCF(Si,Sj)</div></div><div  class=cdline ><div  class=cdrinum >.41c</div><div  class=cdmcmd >;* Si,Sj</div></div><div  class=cdline ><div  class=cdrinum >.42c</div><div  class=cdmcmd ><a href=CB-ep4PAR-BI1.cb2.html >BI1</a>    S Si=Sbi,Sj=Sbj</div></div><div  class=cdline ><div  class=cdrinum >.43c</div><div  class=cdmcmd >       D GFL^kfm(<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>) ; Si,Sj : ru*...</div></div><div  class=cdline ><div  class=cdrinum >.44c</div><div  class=cdmcmd >       S SSb=svSSq</div></div><div  class=cdline ><div  class=cdrinum >.45c</div><div  class=cdmcmd >         I Wmo["I1" D Witem^ep4W("BI1")</div></div><div  class=cdline ><div  class=cdrinum >.46c</div><div  class=cdmcmd >       ;D getR1^ep4W ; dot, <a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a> : tokR1, tokTy</div></div><div  class=cdline ><div  class=cdrinum >.47c</div><div  class=cdmcmd >        ; rule loop, item-loop, </div></div><div  class=cdline ><div  class=cdrinum >.48c</div><div  class=cdmcmd >        ;</div></div><div  class=cdline ><div  class=cdrinum >.49c</div><div  class=cdmcmd >       D ^dv("Log <a href=CB-ep4PAR-BI1.cb2.html >BI1</a>+8 P-S-C choice","Sbi,Sbj,tokR1,tokTy,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,dot,ruab,IPs,IPe")</div></div><div  class=cdline ><div  class=cdrinum >.50c</div><div  class=cdmcmd >       I Sbi=Sei,Sbj=Sej DO  ;</div></div><div  class=cdline ><div  class=cdrinum >.51c</div><div  class=cdmcmd >         .W !!,"Bloop2:  SeiSej-",! </div></div><div  class=cdline ><div  class=cdrinum >.52c</div><div  class=cdmcmd >         .D <a href=CB-ep4PAR-PZE.cb2.html >PZE</a>("Sei/Sej BLoop","Sei,Sej,tokTy,tokR1,dot,ruLst")</div></div><div  class=cdline ><div  class=cdrinum >.53c</div><div  class=cdmcmd >       I tokR1=""!(tokTy="C") S trc="C:" D <a href=CB-ep4PAR-COMPLETE.cb2.html >COMPLETE</a>(Sbi,Sbj,IPs,runa)  Q  ; </div></div><div  class=cdline ><div  class=cdrinum >.54c</div><div  class=cdmcmd >       I tokTy="T" S trc="S:" D <a href=CB-ep4PAR-SCAN.cb2.html >SCAN</a>(Sbi,Sbj,tokR1)  Q  ; token with + is terminal</div></div><div  class=cdline ><div  class=cdrinum >.55c</div><div  class=cdmcmd >       ; tokTy="R"</div></div><div  class=cdline ><div  class=cdrinum >.56c</div><div  class=cdmcmd >       I tokTy'="R" D b^dv("Err tokTy","tokTy,tokR1,ruab,dot,ruLst")</div></div><div  class=cdline ><div  class=cdrinum >.57c</div><div  class=cdmcmd >       S trc="P:" D <a href=CB-ep4PAR-PRED.cb2.html >PRED</a>(Sbi,Sbj,tokR1) Q ;inside loop chart items/rules2.9</div></div><div  class=cdline ><div  class=cdrinum >.58c</div><div  class=cdmcmd >       D b^dv("Err illegal rule.?","tokR1,Sbi,Sbj")</div></div><div  class=cdline ><div  class=cdrinum >.59c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >.60c</div><div  class=cdmcmd >;*   end each inside loop</div></div><div  class=cdline ><div  class=cdrinum >.61c</div><div  class=cdmcmd ><a href=CB-ep4PAR-EL2.cb2.html >EL2</a>    W:$X ! W "End inner Bloop ",Sbi,",",Sbj,"   trace:",$G(trc),"  "</div></div><div  class=cdline ><div  class=cdrinum >.62c</div><div  class=cdmcmd >       ;I $G(SCF(Sbi+1))="" S SCF(Sbi+1)=0 ; just do $D <a href=CB-TOIn-test.cb2.html >test</a> now, do not store count</div></div><div  class=cdline ><div  class=cdrinum >.63c</div><div  class=cdmcmd >       I Sbi=Sei,Sbj=Sej DO  ;</div></div><div  class=cdline ><div  class=cdrinum >.64c</div><div  class=cdmcmd >         .S M="Log Bloop2 End Sel:Sei/j "_Sbi_"."_Sbj_"  "</div></div><div  class=cdline ><div  class=cdrinum >.65c</div><div  class=cdmcmd >         .D <a href=CB-ep4PAR-PZE.cb2.html >PZE</a>(M,"tokTy,tokR1,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,tokCL,IPs,IPe,dot")</div></div><div  class=cdline ><div  class=cdrinum >.66c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >.67c</div><div  class=cdmcmd >;*         </div></div><div  class=cdline ><div  class=cdrinum >.68c</div><div  class=cdmcmd >;*  Sbi, Sbj        </div></div><div  class=cdline ><div  class=cdrinum >.69c</div><div  class=cdmcmd ><a href=CB-ep4PAR-PRED.cb2.html >PRED</a>(Spi,Spj,tokP)  ;NEW Spj</div></div><div  class=cdline ><div  class=cdrinum >.70c</div><div  class=cdmcmd >       W:$X ! W "#",SSq," <a href=CB-ep4PAR-PRED.cb2.html >PRED</a> find '",$G(tokP),"' in Gxi-&gt; gi -&gt; ruid",!</div></div><div  class=cdline ><div  class=cdrinum >.71c</div><div  class=cdmcmd >       I $G(tokP)="" D b^dv("Err tokR1 should not be null here","tokP,tokR1,Sbi,Sbj,Spi") Q</div></div><div  class=cdline ><div  class=cdrinum >.72c</div><div  class=cdmcmd >       I Spi'=Sbi D b^dv("Maybe <a href=CB-dzroz-Err.cb2.html >Err</a> ?","Sbi,Spi,Spj")</div></div><div  class=cdline ><div  class=cdrinum >.73c</div><div  class=cdmcmd >       I $D(Gxi(tokP))=0 D bug^dv("Err tokR1 not in Gxi(tokR1/P","tokP") Q</div></div><div  class=cdline ><div  class=cdrinum >.74c</div><div  class=cdmcmd >       S SSp=Spi_"."_Spj  ;same each in gi loop</div></div><div  class=cdline ><div  class=cdrinum >.75c</div><div  class=cdmcmd >       ;For every grammar rule with name=tokP- runa,gi -&gt; ruid</div></div><div  class=cdline ><div  class=cdrinum >.76c</div><div  class=cdmcmd >       F gi=1:1 Q:$D(Gxi(tokP,gi))=0   D <a href=CB-ep4PAR-NwP.cb2.html >NwP</a></div></div><div  class=cdline ><div  class=cdrinum >.77c</div><div  class=cdmcmd >       ;D <a href=CB-ep4PAR-PZE.cb2.html >PZE</a></div></div><div  class=cdline ><div  class=cdrinum >.78c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >.79c</div><div  class=cdmcmd >;*  try new dot,IPs,ruid from</div></div><div  class=cdline ><div  class=cdrinum >.80c</div><div  class=cdmcmd ><a href=CB-ep4PAR-NwP.cb2.html >NwP</a>    ; tokP, gi &gt; ruid /GR record</div></div><div  class=cdline ><div  class=cdrinum >.81c</div><div  class=cdmcmd >       S ruid=$G(Gxi(tokP,gi))</div></div><div  class=cdline ><div  class=cdrinum >.82c</div><div  class=cdmcmd >         I ruid="" D b^dv("Err ruid from Gxi(tokR1)","ruid,tokR1,gi") Q</div></div><div  class=cdline ><div  class=cdrinum >.83c</div><div  class=cdmcmd >       D GFL^kfm("ruab,runa,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,IPs",<a href=CB-epaIMG-grFL.cb2.html >grFL</a>)  ; ruid : <a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>, ruab  ? IPs</div></div><div  class=cdline ><div  class=cdrinum >.84c</div><div  class=cdmcmd >       S dot=1</div></div><div  class=cdline ><div  class=cdrinum >.85c</div><div  class=cdmcmd >       S ruby="PRED"         </div></div><div  class=cdline ><div  class=cdrinum >.86c</div><div  class=cdmcmd >       S frm="Pred fr:"_Spi_"."_Spj</div></div><div  class=cdline ><div  class=cdrinum >.87c</div><div  class=cdmcmd >       S IPs=Sbi  ; IPs item.<a href=CB-KGD-start.cb2.html >start</a></div></div><div  class=cdline ><div  class=cdrinum >.88c</div><div  class=cdmcmd >       I IPe'=Spi-1 D ^dv("Err Inconsistenct IPe,Spi","IPe,Sci,Si,Sj")</div></div><div  class=cdline ><div  class=cdrinum >.89c</div><div  class=cdmcmd >       ;S IPe=Spi-1  ; IPe is implicit always == Si-1?</div></div><div  class=cdline ><div  class=cdrinum >.90c</div><div  class=cdmcmd >       D <a href=CB-ep4PAR-SSC.cb2.html >SSC</a>(Spi,frm) ; <a href=CB-KGD-save.cb2.html >save</a> in this Sbi~Spi State (same), if not dupl, Sbi at end</div></div><div  class=cdline ><div  class=cdrinum >.91c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >.92c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >.93c</div><div  class=cdmcmd ><a href=CB-ep4PAR-FLg4.cb2.html >FLg4</a>  ;;<a href=CB-epaIMG-grFL.cb2.html >grFL</a>:runa,ruab,ruty,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,nLst,tokCL,nLCL,Lna,rde_GRk(ruid)</div></div><div  class=cdline ><div  class=cdrinum >.94c</div><div  class=cdmcmd ><a href=CB-ep4PAR-FLi4.cb2.html >FLi4</a>  ;;<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>:runa,ruab,ruid,ikey,SSq,IPs,IPe,dot,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,tokR1,tokTy,ruby,frm_SCF(Si,Sj)</div></div><div  class=cdline ><div  class=cdrinum >.95c</div><div  class=cdmcmd ></div></div><div  class=cdline ><div  class=cdrinum >.96c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >.97c</div><div  class=cdmcmd >;* Sbi,Sbj  @itemGL  : mod <a href=CB-ep4PAR-SSC.cb2.html >SSC</a></div></div><div  class=cdline ><div  class=cdrinum >.98c</div><div  class=cdmcmd ><a href=CB-ep4PAR-SCAN.cb2.html >SCAN</a>(<a href=CB-dw-ssi.cb2.html >Ssi</a>,Ssj,tokR1) ;I <a href=CB-dw-ssi.cb2.html >Ssi</a>=1 D ^dv("No Input Si=1","Ssi,Ssj,tokR1") Q</div></div><div  class=cdline ><div  class=cdrinum >.99c</div><div  class=cdmcmd >       S IPc=<a href=CB-dw-ssi.cb2.html >Ssi</a></div></div><div  class=cdline ><div  class=cdrinum >100c</div><div  class=cdmcmd >       S mch=$$<a href=CB-ep4PAR-TMch.cb2.html >TMch</a>(tokR1,IPc)</div></div><div  class=cdline ><div  class=cdrinum >101c</div><div  class=cdmcmd >       I 'mch Q  ;No match or past end, no mch</div></div><div  class=cdline ><div  class=cdrinum >102c</div><div  class=cdmcmd >       ;Here matched terminal, C in tokCL, ITcl(tokR1)</div></div><div  class=cdline ><div  class=cdrinum >103c</div><div  class=cdmcmd >       S dot=dot+1</div></div><div  class=cdline ><div  class=cdrinum >104c</div><div  class=cdmcmd >       S SSp=<a href=CB-dw-ssi.cb2.html >Ssi</a>_"."_Ssj</div></div><div  class=cdline ><div  class=cdrinum >105c</div><div  class=cdmcmd >       S frm="SCAN term char '"_C_"'  fr:"_SSp</div></div><div  class=cdline ><div  class=cdrinum >106c</div><div  class=cdmcmd >       S Ssi2=<a href=CB-dw-ssi.cb2.html >Ssi</a>+1</div></div><div  class=cdline ><div  class=cdrinum >107c</div><div  class=cdmcmd >       S IPe=<a href=CB-dw-ssi.cb2.html >Ssi</a> ; ?</div></div><div  class=cdline ><div  class=cdrinum >108c</div><div  class=cdmcmd >       I Wmo["SCs" DO  ;</div></div><div  class=cdline ><div  class=cdrinum >109c</div><div  class=cdmcmd >         .S <a href=CB-dv-log.cb2.html >log</a>="SCAN mch "_Sbi_"."_Sbj_" -&gt; "_Ssi2_".*"</div></div><div  class=cdline ><div  class=cdrinum >110c</div><div  class=cdmcmd >         .D ^dv(<a href=CB-dv-log.cb2.html >log</a>,"IPc,C,tokCL,IPs,IPe,dot")</div></div><div  class=cdline ><div  class=cdrinum >111c</div><div  class=cdmcmd >       D <a href=CB-ep4PAR-SSC.cb2.html >SSC</a>(Ssi2,frm)  ; Svj</div></div><div  class=cdline ><div  class=cdrinum >112c</div><div  class=cdmcmd >         I EQ D ^dv("SSC Rej Dupl Scan Mch","EQ,mch,Ssi2,Svj")</div></div><div  class=cdline ><div  class=cdrinum >113c</div><div  class=cdmcmd >       I Sbi=Sei,Sbj=Sej DO  ;</div></div><div  class=cdline ><div  class=cdrinum >114c</div><div  class=cdmcmd >         .W:$X ! W " * end scan ",<a href=CB-dw-ssi.cb2.html >Ssi</a>,".",Ssj," -- ",Ssi2,".",Svj," ?EQ~RejDup ",EQ,!</div></div><div  class=cdline ><div  class=cdrinum >115c</div><div  class=cdmcmd >         .D <a href=CB-ep4PAR-PZE.cb2.html >PZE</a>("End Scan Sei/Sej","EQ,Ssi2,Svj")</div></div><div  class=cdline ><div  class=cdrinum >116c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >117c</div><div  class=cdmcmd >;* Terminal Match</div></div><div  class=cdline ><div  class=cdrinum >118c</div><div  class=cdmcmd ><a href=CB-ep4PAR-TMch.cb2.html >TMch</a>(tok,IPc)  NEW ruid,ruab,tokCL</div></div><div  class=cdline ><div  class=cdrinum >119c</div><div  class=cdmcmd >       I IPc&gt;$L(Ins) Q 0  ; No mch, past end</div></div><div  class=cdline ><div  class=cdrinum >120c</div><div  class=cdmcmd >       S C=INc(IPc) I C="" D b^dv("Err C ","C,IPc,<a href=CB-dw-ssi.cb2.html >Ssi</a>,Ssj") Q</div></div><div  class=cdline ><div  class=cdrinum >121c</div><div  class=cdmcmd >       ;</div></div><div  class=cdline ><div  class=cdrinum >122c</div><div  class=cdmcmd >       S ruid=$G(Gxi(tok,1))  ;only one gi for terminal tokens</div></div><div  class=cdline ><div  class=cdrinum >123c</div><div  class=cdmcmd >         I ruid="" D b^dv("Err Scan finding ruid from tokR1","tokRa,tokTy,ruid") Q 0</div></div><div  class=cdline ><div  class=cdrinum >124c</div><div  class=cdmcmd >       S ruab=$G(GRk(ruid,"ruab"))</div></div><div  class=cdline ><div  class=cdrinum >125c</div><div  class=cdmcmd >       S tokCL=$G(GRk(ruid,"tokCL"))</div></div><div  class=cdline ><div  class=cdrinum >126c</div><div  class=cdmcmd >         I tokCL="" D b^dv("Err Char tokCL","tokCL,tokR1,tok,C") Q 0</div></div><div  class=cdline ><div  class=cdrinum >127c</div><div  class=cdmcmd >       ;</div></div><div  class=cdline ><div  class=cdrinum >128c</div><div  class=cdmcmd >       D ^dv("Log <a href=CB-TOIn-test.cb2.html >test</a> Scan Mch ","C,<a href=CB-dw-ssi.cb2.html >Ssi</a>,tokR1")</div></div><div  class=cdline ><div  class=cdrinum >129c</div><div  class=cdmcmd >       S mch=tokCL[C</div></div><div  class=cdline ><div  class=cdrinum >130c</div><div  class=cdmcmd >       I 'mch D ^dv("Log non-match "_C_"' not in "_tokR1,"C,CL,tokR1,<a href=CB-dw-ssi.cb2.html >Ssi</a>,Ssj")</div></div><div  class=cdline ><div  class=cdrinum >131c</div><div  class=cdmcmd >       I mch D ^dv("Scan Matches ","tok,C,tokCL,ruid")</div></div><div  class=cdline ><div  class=cdrinum >132c</div><div  class=cdmcmd >       Q mch</div></div><div  class=cdline ><div  class=cdrinum >133c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >134c</div><div  class=cdmcmd ><a href=CB-ep4PAR-FLg3.cb2.html >FLg3</a>  ;;<a href=CB-epaIMG-grFL.cb2.html >grFL</a>:runa,ruab,ruty,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,nLst,tokCL,nLCL,Lna,rde_GRk(ruid)</div></div><div  class=cdline ><div  class=cdrinum >135c</div><div  class=cdmcmd ><a href=CB-ep4PAR-FLi3.cb2.html >FLi3</a>  ;;<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>:runa,ruab,ruid,ikey,SSq,IPs,IPe,dot,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,tokR1,tokTy,ruby,frm_SCF(Si,Sj)</div></div><div  class=cdline ><div  class=cdrinum >136c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >137c</div><div  class=cdmcmd ><a href=CB-ep4PAR-COMPLETE.cb2.html >COMPLETE</a>(Sci,Scj,FIPs,Fna)  ;  S2i Fna~Found runa, FIPs~FOund IPs-&gt; where to <a href=CB-KGD-search.cb2.html >search</a></div></div><div  class=cdline ><div  class=cdrinum >138c</div><div  class=cdmcmd >       ;item  finished, item Sbi~Sci . Sbj~Scj  </div></div><div  class=cdline ><div  class=cdrinum >139c</div><div  class=cdmcmd >       I $G(Fna)="" D b^dv("Err Found runa/Fna null","Fna,runa,Sci,Scj")</div></div><div  class=cdline ><div  class=cdrinum >140c</div><div  class=cdmcmd >       ;I Sci'=S2i D b^dv(" +++ COMP? Gotcha Sci'=S2i/(FIPs+1) ","Sci,S2i,IPs,Fna")</div></div><div  class=cdline ><div  class=cdrinum >141c</div><div  class=cdmcmd >       I (Sci_Scj)=(Sei_Sej) DO  ;</div></div><div  class=cdline ><div  class=cdrinum >142c</div><div  class=cdmcmd >         .W !!,"COMP SeiSej-",! </div></div><div  class=cdline ><div  class=cdrinum >143c</div><div  class=cdmcmd >         .D <a href=CB-ep4PAR-PZE.cb2.html >PZE</a>("Sei/Sej COMP","Sei,Sej,FIPs,Fna")</div></div><div  class=cdline ><div  class=cdrinum >144c</div><div  class=cdmcmd >       W:$X ! W "COMP pre process "_Sbi,".",Sbj,"  ",Fna," [",IPs,"-",IPe,"] -&gt; ",<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,"  ",!</div></div><div  class=cdline ><div  class=cdrinum >145c</div><div  class=cdmcmd >       S Sc2i=FIPs  ;1.6 <a href=CB-KGD-init.cb2.html >init</a>, =1 (Sci-1, </div></div><div  class=cdline ><div  class=cdrinum >146c</div><div  class=cdmcmd >       W:$X ! W "C Srch IPs set",Sc2i," for Fna in tokR1-"       </div></div><div  class=cdline ><div  class=cdrinum >147c</div><div  class=cdmcmd >       I Wmo["COM" D b^dv("Log COMP to ck all of Sc2i for runa~Fna in tokR1","Sc2i,FIPs,Fna,trc")</div></div><div  class=cdline ><div  class=cdrinum >148c</div><div  class=cdmcmd >       F Sc2j=1:1 Q:$D(SCF(Sc2i,Sc2j))=0  DO  ;  vs While, SCF(Sc2i) chgs?</div></div><div  class=cdline ><div  class=cdrinum >149c</div><div  class=cdmcmd >         .S Si=Sc2i,Sj=Sc2j</div></div><div  class=cdline ><div  class=cdrinum >150c</div><div  class=cdmcmd >         .S SSp=Sc2i_"."_Sc2j</div></div><div  class=cdline ><div  class=cdrinum >151c</div><div  class=cdmcmd >         .D GFL^kfm("tokR1,tokTy",<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>) ; Si,Sj : @<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a></div></div><div  class=cdline ><div  class=cdrinum >152c</div><div  class=cdmcmd >         .I Fna'=tokR1 DO  Q  </div></div><div  class=cdline ><div  class=cdrinum >153c</div><div  class=cdmcmd >            ..W:$X ! W "COMP sch Rej Fna=tokR1 "_Sc2i_"."_Sc2j_"  tokR1:"_tokR1,!</div></div><div  class=cdline ><div  class=cdrinum >154c</div><div  class=cdmcmd >         .;  Found C mch</div></div><div  class=cdline ><div  class=cdrinum >155c</div><div  class=cdmcmd >         .D GFL^kfm("ruid,ruab,runa,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,dot,IPs,IPe",<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>) ; Si,Sj : @<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>   / old_item    IPs from item     </div></div><div  class=cdline ><div  class=cdrinum >156c</div><div  class=cdmcmd >         .I Wmo["COM" W:$X ! W " * + Comp st ",Sc2i,".",Sc2j," .",dot,"  ",?40,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,!    </div></div><div  class=cdline ><div  class=cdrinum >157c</div><div  class=cdmcmd >         .S dot=dot+1</div></div><div  class=cdline ><div  class=cdrinum >158c</div><div  class=cdmcmd >         .;D getR1^ep4W ; dot, <a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a> : tokR1,tokTy</div></div><div  class=cdline ><div  class=cdrinum >159c</div><div  class=cdmcmd >         .S ruby="COMP"      </div></div><div  class=cdline ><div  class=cdrinum >160c</div><div  class=cdmcmd >         .S Sc3i=Sci,IPe=Sc3i         </div></div><div  class=cdline ><div  class=cdrinum >161c</div><div  class=cdmcmd >         .S frm="Cmplt fr:"_Sci_"."_Scj_"(C) sub "_tokR1_" into "_Sc2i_"."_Sc2j_",  new:"_Sc3i_".*"</div></div><div  class=cdline ><div  class=cdrinum >162c</div><div  class=cdmcmd >         .D <a href=CB-ep4PAR-SSC.cb2.html >SSC</a>(Sc3i,frm)  S Sc3j=Svj  ; where new stored</div></div><div  class=cdline ><div  class=cdrinum >163c</div><div  class=cdmcmd >         .I EQ D b^dv("COMP rej Dupl ","EQ,<a href=CB-dv-log.cb2.html >log</a>,ruid,dot,IPs,Svj")</div></div><div  class=cdline ><div  class=cdrinum >164c</div><div  class=cdmcmd >         .I 'EQ DO  ;</div></div><div  class=cdline ><div  class=cdrinum >165c</div><div  class=cdmcmd >           ..S <a href=CB-dv-log.cb2.html >log</a>="COMP done: fr Sb C: "_Sci_"."_Scj_" bump "_Sc2i_"."_Sc2j_" into- "</div></div><div  class=cdline ><div  class=cdrinum >166c</div><div  class=cdmcmd >           ..S Citem="  "_Sc3i_"."_Sc3j_" #"_SSq_"  "_ruab_"/"_ruid_" -&gt; ."_dot_" ["_IPs_"-"_IPe_"] "</div></div><div  class=cdline ><div  class=cdrinum >167c</div><div  class=cdmcmd >           ..I Sbi=Sei,Sbj=Sej W:$X ! W <a href=CB-dv-log.cb2.html >log</a>,!,Citem,!</div></div><div  class=cdline ><div  class=cdrinum >168c</div><div  class=cdmcmd >           ..;D ^dv("Log one new C item ","Sci,Scj,Sc2i,Sc2j,Sc3i,Sc3j,dot,ruLst")</div></div><div  class=cdline ><div  class=cdrinum >169c</div><div  class=cdmcmd >         .W:$X ! W " * + COMP end-new ",Sci,"/",Scj," .",dot,"  ",?40,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,!</div></div><div  class=cdline ><div  class=cdrinum >170c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >171c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >172c</div><div  class=cdmcmd >;*  <a href=CB-KGD-save.cb2.html >Save</a> in SCF</div></div><div  class=cdline ><div  class=cdrinum >173c</div><div  class=cdmcmd >;Analog of Append and Unsafe-Append (sic,sic) functions</div></div><div  class=cdline ><div  class=cdrinum >174c</div><div  class=cdmcmd >;  Dont duplicate, loop til empty, punt if dupl</div></div><div  class=cdline ><div  class=cdrinum >175c</div><div  class=cdmcmd >;* @<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a> modified : SCF(Svi,Svj),  Svj, 'EQ =&gt; new at Svj/ EQ rej dupl</div></div><div  class=cdline ><div  class=cdrinum >176c</div><div  class=cdmcmd ><a href=CB-ep4PAR-FLg2.cb2.html >FLg2</a>  ;;<a href=CB-epaIMG-grFL.cb2.html >grFL</a>:runa,ruab,ruty,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,nLst,tokCL,nLCL,Lna,rde_GRk(ruid)</div></div><div  class=cdline ><div  class=cdrinum >177c</div><div  class=cdmcmd ><a href=CB-ep4PAR-FLi2.cb2.html >FLi2</a>  ;;<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>:runa,ruab,ruid,ikey,SSq,IPs,IPe,dot,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,tokR1,tokTy,ruby,frm_SCF(Si,Sj)</div></div><div  class=cdline ><div  class=cdrinum >178c</div><div  class=cdmcmd ><a href=CB-ep4PAR-SSC.cb2.html >SSC</a>(Svi,frm)  ;no NEW Svj- returned for debugging</div></div><div  class=cdline ><div  class=cdrinum >179c</div><div  class=cdmcmd >       ;Find end AND ck for dupl to Punt on EQ~dupl</div></div><div  class=cdline ><div  class=cdrinum >180c</div><div  class=cdmcmd >       S EQ=0 F Svj=1:1 Q:$D(SCF(Svi,Svj))=0   DO  Q:EQ  </div></div><div  class=cdline ><div  class=cdrinum >181c</div><div  class=cdmcmd >         .S EQ=1 F <a href=CB-GAscan-vn.cb2.html >vn</a>="ruid","dot","IPs","" Q:<a href=CB-GAscan-vn.cb2.html >vn</a>=""  I @<a href=CB-GAscan-vn.cb2.html >vn</a>'=$G(SCF(Svi,Svj,<a href=CB-GAscan-vn.cb2.html >vn</a>)) S EQ=0 Q</div></div><div  class=cdline ><div  class=cdrinum >182c</div><div  class=cdmcmd >         .;D ^dv("Log EQ","EQ,<a href=CB-GAscan-vn.cb2.html >vn</a>,Svi,Svj,ruid,dot,IPs,frm,trc,ruby")</div></div><div  class=cdline ><div  class=cdrinum >183c</div><div  class=cdmcmd >       ;Punt if duplicate found:</div></div><div  class=cdline ><div  class=cdrinum >184c</div><div  class=cdmcmd >       I EQ  DO  Q  ; punt when dupl exists already</div></div><div  class=cdline ><div  class=cdrinum >185c</div><div  class=cdmcmd >          .S <a href=CB-dv-log.cb2.html >log</a>="X X X Rej Dupl "_Svi_"."_Svj_"  #"_ruid_", ."_dot_" s:"_IPs_"  frm:"_frm</div></div><div  class=cdline ><div  class=cdrinum >186c</div><div  class=cdmcmd >          .I Wmo["RejDup" D ^dv(<a href=CB-dv-log.cb2.html >log</a>,"Sbi,Sbj")</div></div><div  class=cdline ><div  class=cdrinum >187c</div><div  class=cdmcmd >          .W:$X ! W <a href=CB-dv-log.cb2.html >log</a>,!</div></div><div  class=cdline ><div  class=cdrinum >188c</div><div  class=cdmcmd >       ; Non-duplicate, <a href=CB-KGD-save.cb2.html >save</a>-</div></div><div  class=cdline ><div  class=cdrinum >189c</div><div  class=cdmcmd >       S SSq=SSq+1,svSSq=SSq ;Serial items       </div></div><div  class=cdline ><div  class=cdrinum >190c</div><div  class=cdmcmd >       S Si=Svi,Sj=Svj</div></div><div  class=cdline ><div  class=cdrinum >191c</div><div  class=cdmcmd >       D getR1^ep4W ; dot, rulst : tokR1, tokTy</div></div><div  class=cdline ><div  class=cdrinum >192c</div><div  class=cdmcmd >       D <a href=CB-ep4PAR-MEX.cb2.html >MEX</a> ; ruid,IPs,dot,IPe : ikey</div></div><div  class=cdline ><div  class=cdrinum >193c</div><div  class=cdmcmd >       ; Svj is new empty node, ie SCF(Svi,Svj    </div></div><div  class=cdline ><div  class=cdrinum >194c</div><div  class=cdmcmd >       D SFL^kfm("ruid,ikey,dot,IPs,IPe,runa,ruab,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,frm,tokR1,tokTy,svSSq",<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>) ; Si=Svi, Sj=Svj new at end</div></div><div  class=cdline ><div  class=cdrinum >195c</div><div  class=cdmcmd >       D <a href=CB-ep4PAR-TEX.cb2.html >TEX</a></div></div><div  class=cdline ><div  class=cdrinum >196c</div><div  class=cdmcmd >       ;D <a href=CB-ep4PAR-REX.cb2.html >REX</a>  ;</div></div><div  class=cdline ><div  class=cdrinum >197c</div><div  class=cdmcmd >       S <a href=CB-dv-log.cb2.html >log</a>=" + + <a href=CB-ep4PAR-SSC.cb2.html >SSC</a>: q"_SSq_"  "_Si_"."_Sj_"["_IPs_"-"_IPe_"]  ."_dot_" #"_ruid_" "_frm</div></div><div  class=cdline ><div  class=cdrinum >198c</div><div  class=cdmcmd >       W:$X ! W <a href=CB-dv-log.cb2.html >log</a>,!</div></div><div  class=cdline ><div  class=cdrinum >199c</div><div  class=cdmcmd >       ;audit-</div></div><div  class=cdline ><div  class=cdrinum >200c</div><div  class=cdmcmd >         ;I IPe'=(Svi-1) D b^dv("Err explicit IPe vs Svi-1","tIPe,Svi,Svj")</div></div><div  class=cdline ><div  class=cdrinum >201c</div><div  class=cdmcmd >       I Wmo["SSC" DO  ;</div></div><div  class=cdline ><div  class=cdrinum >202c</div><div  class=cdmcmd >         .W:$X ! W "SSC New/nonDup SCF(",Svi,".",Svj,") = "</div></div><div  class=cdline ><div  class=cdrinum >203c</div><div  class=cdmcmd >         .W ?40,ruab,"  '",<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,"' ",!</div></div><div  class=cdline ><div  class=cdrinum >204c</div><div  class=cdmcmd >       Q:$Q "New:"_Svi_"."_Svj_"  "_ruab Q</div></div><div  class=cdline ><div  class=cdrinum >205c</div><div  class=cdmcmd >;*  Index back to sources - no refs yet</div></div><div  class=cdline ><div  class=cdrinum >206c</div><div  class=cdmcmd ><a href=CB-ep4PAR-REX.cb2.html >REX</a>    S Rex(SSq,dot,SSb)=LST</div></div><div  class=cdline ><div  class=cdrinum >207c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >208c</div><div  class=cdmcmd >;*  ruid,IPs,IPe,dot -&gt; ikey</div></div><div  class=cdline ><div  class=cdrinum >209c</div><div  class=cdmcmd >;*  ikey MEP(SSq)=ikey, MExk(ikey)=SSq   ruid,IPs,dot : ikey</div></div><div  class=cdline ><div  class=cdrinum >210c</div><div  class=cdmcmd ><a href=CB-ep4PAR-MEX.cb2.html >MEX</a>    S ikey=ruid_"-"_dot_"-"_IPs_"-"_IPe</div></div><div  class=cdline ><div  class=cdrinum >211c</div><div  class=cdmcmd >       S Iabe(ruab,IPe,SSq)=ikey</div></div><div  class=cdline ><div  class=cdrinum >212c</div><div  class=cdmcmd >       S ISe(IPe,runa,SSq)=ikey</div></div><div  class=cdline ><div  class=cdrinum >213c</div><div  class=cdmcmd >       S <a href=CB-dzroz-ss.cb2.html >SS</a>=Si_"."_Sj</div></div><div  class=cdline ><div  class=cdrinum >214c</div><div  class=cdmcmd >       S IR(<a href=CB-dzroz-ss.cb2.html >SS</a>)=$G(SSp)</div></div><div  class=cdline ><div  class=cdrinum >215c</div><div  class=cdmcmd >       ;</div></div><div  class=cdline ><div  class=cdrinum >216c</div><div  class=cdmcmd >       S x=$G(MEP(SSq)) I x'="" D b^dv("Err Repeat SSq?","SSq,ikey")</div></div><div  class=cdline ><div  class=cdrinum >217c</div><div  class=cdmcmd >       S MEP(SSq)=ikey</div></div><div  class=cdline ><div  class=cdrinum >218c</div><div  class=cdmcmd >       S x=$G(MExk(ikey)) I x'="" D b^dv("Err Dupl ikey","ikey,SSq,IPe")</div></div><div  class=cdline ><div  class=cdrinum >219c</div><div  class=cdmcmd >       S MExk(ikey,SSq)=IPe</div></div><div  class=cdline ><div  class=cdrinum >220c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >221c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >222c</div><div  class=cdmcmd >;*  <a href=CB-dzroz-ss.cb2.html >SS</a>, wIC</div></div><div  class=cdline ><div  class=cdrinum >223c</div><div  class=cdmcmd ><a href=CB-ep4PAR-TEX.cb2.html >TEX</a>    NEW vi,<a href=CB-GAscan-vn.cb2.html >vn</a>,<a href=CB-dws-xl.cb2.html >XL</a></div></div><div  class=cdline ><div  class=cdrinum >224c</div><div  class=cdmcmd >       S X="",<a href=CB-dws-xl.cb2.html >XL</a>="ruid,dot,IPs,IPe" F vi=1:1:$L(<a href=CB-dws-xl.cb2.html >XL</a>,",") S <a href=CB-GAscan-vn.cb2.html >vn</a>=$P(<a href=CB-dws-xl.cb2.html >XL</a>,",",vi) S $P(X,"_",vi)=@<a href=CB-GAscan-vn.cb2.html >vn</a></div></div><div  class=cdline ><div  class=cdrinum >225c</div><div  class=cdmcmd >       S <a href=CB-dzroz-ss.cb2.html >SS</a>=Si_"."_Sj</div></div><div  class=cdline ><div  class=cdrinum >226c</div><div  class=cdmcmd >       S XSS(SSq)=<a href=CB-dzroz-ss.cb2.html >SS</a></div></div><div  class=cdline ><div  class=cdrinum >227c</div><div  class=cdmcmd >       S XSQ(<a href=CB-dzroz-ss.cb2.html >SS</a>)=SSq</div></div><div  class=cdline ><div  class=cdrinum >228c</div><div  class=cdmcmd >       ; part two</div></div><div  class=cdline ><div  class=cdrinum >229c</div><div  class=cdmcmd >       S wIC="{"_$E(Ins,IPs,IPe)_"}"</div></div><div  class=cdline ><div  class=cdrinum >230c</div><div  class=cdmcmd >       S DSQ(SSq)=Svi_"."_Svj_"  "_$G(wIC)  ;actual sequence</div></div><div  class=cdline ><div  class=cdrinum >231c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >232c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >233c</div><div  class=cdmcmd ><a href=CB-ep4PAR-PZE.cb2.html >PZE</a>(M,<a href=CB-dmnDIS-VL.cb2.html >VL</a>) USE $P W !!," *****  "</div></div><div  class=cdline ><div  class=cdrinum >234c</div><div  class=cdmcmd >      S <a href=CB-dmnDIS-VL.cb2.html >VL</a>=$G(<a href=CB-dmnDIS-VL.cb2.html >VL</a>) I <a href=CB-dmnDIS-VL.cb2.html >VL</a>="" S <a href=CB-dmnDIS-VL.cb2.html >VL</a>="mrid"</div></div><div  class=cdline ><div  class=cdrinum >235c</div><div  class=cdmcmd >      I $G(M)'="" D ^dv(M,<a href=CB-dmnDIS-VL.cb2.html >VL</a>)</div></div><div  class=cdline ><div  class=cdrinum >236c</div><div  class=cdmcmd >      R !,"Pause (ret) . for Dir Mode",!,":",X</div></div><div  class=cdline ><div  class=cdrinum >237c</div><div  class=cdmcmd >      I $G(<a href=CB-dmnDIS-VL.cb2.html >VL</a>)="" S <a href=CB-dmnDIS-VL.cb2.html >VL</a>="Sbi,Sbj,ruid,ruab,tokR1,tokTy"</div></div><div  class=cdline ><div  class=cdrinum >238c</div><div  class=cdmcmd >      I X["." D b^dv("Pause ",<a href=CB-dmnDIS-VL.cb2.html >VL</a>)</div></div><div  class=cdline ><div  class=cdrinum >239c</div><div  class=cdmcmd >      Q</div></div><div  class=cdline ><div  class=cdrinum >240c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >241c</div><div  class=cdmcmd >;;<a href=CB-epaIMG-grFL.cb2.html >grFL</a>:runa,ruab,rugi,ruty,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,nLst,tokCL,nLCL,Lna,rude_GRk(ruid)</div></div><div  class=cdline ><div  class=cdrinum >242c</div><div  class=cdmcmd >;;<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>:runa,ruab,ruid,ikey,SSq,IPs,IPe,dot,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,tokR1,tokTy,ruby,frm_SCF(Si,Sj)</div></div><div  class=cdline ><div  class=cdrinum >243c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >244c</div><div  class=cdmcmd ><a href=CB-ep4PAR-initSC.cb2.html >initSC</a> KILL SCF,MEP,MExk</div></div><div  class=cdline ><div  class=cdrinum >245c</div><div  class=cdmcmd >       S SSq=0</div></div><div  class=cdline ><div  class=cdrinum >246c</div><div  class=cdmcmd >       D ^epaIMG  ; <a href=CB-epaIMG-grFL.cb2.html >grFL</a>, <a href=CB-epaIMG-itemFL.cb2.html >itemFL</a></div></div><div  class=cdline ><div  class=cdrinum >247c</div><div  class=cdmcmd >       ;D ^kfmUafl("umep") ; already in ^epaIMG  </div></div><div  class=cdline ><div  class=cdrinum >248c</div><div  class=cdmcmd >       D NFL^kfm(<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>)</div></div><div  class=cdline ><div  class=cdrinum >249c</div><div  class=cdmcmd >       S ruid=1 D GFL^kfm(<a href=CB-epaIMG-grFL.cb2.html >grFL</a>) ; ruid, Sum.1, <a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a></div></div><div  class=cdline ><div  class=cdrinum >250c</div><div  class=cdmcmd >       S frm="Init"  ; Initial conditions</div></div><div  class=cdline ><div  class=cdrinum >251c</div><div  class=cdmcmd >       S dot=1,IPs=1,IPe=0</div></div><div  class=cdline ><div  class=cdrinum >252c</div><div  class=cdmcmd >       D getR1^ep4W ; dot, <a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a> : tokTy, tokR1,tokCL</div></div><div  class=cdline ><div  class=cdrinum >253c</div><div  class=cdmcmd >       S Si=1,Sj=1</div></div><div  class=cdline ><div  class=cdrinum >254c</div><div  class=cdmcmd >       ;D SFL^kfm(<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>)  ; Si,Sj   Alt to <a href=CB-ep4PAR-SSC.cb2.html >SSC</a>, no need to ck dupl</div></div><div  class=cdline ><div  class=cdrinum >255c</div><div  class=cdmcmd >       D <a href=CB-ep4PAR-SSC.cb2.html >SSC</a>(Si,"Init "_ruab)</div></div><div  class=cdline ><div  class=cdrinum >256c</div><div  class=cdmcmd >       ;D ^dv("Log <a href=CB-hgh-Init.cb2.html >Init</a> 1.1","ruLst")</div></div><div  class=cdline ><div  class=cdrinum >257c</div><div  class=cdmcmd >       S ruid=2 D GFL^kfm(<a href=CB-epaIMG-grFL.cb2.html >grFL</a>)</div></div><div  class=cdline ><div  class=cdrinum >258c</div><div  class=cdmcmd >       S dot=1,IPs=1,IPe=0</div></div><div  class=cdline ><div  class=cdrinum >259c</div><div  class=cdmcmd >       D getR1^ep4W ; dot, <a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a> : tokTy, tokR1,tokCL       </div></div><div  class=cdline ><div  class=cdrinum >260c</div><div  class=cdmcmd >       ;S Sj=2 D SFL^kfm(<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>)</div></div><div  class=cdline ><div  class=cdrinum >261c</div><div  class=cdmcmd >       D <a href=CB-ep4PAR-SSC.cb2.html >SSC</a>(Si,"Init "_ruab)</div></div><div  class=cdline ><div  class=cdrinum >262c</div><div  class=cdmcmd >       ;D ^dv("Log <a href=CB-hgh-Init.cb2.html >Init</a> 1.2","ruLst")       </div></div><div  class=cdline ><div  class=cdrinum >263c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >264c</div><div  class=cdmcmd >;*       </div></div><div  class=cdline ><div  class=cdrinum >265c</div><div  class=cdmcmd >; GWUSCO</div></div><div  class=cdline ><div  class=cdrinum >266c</div><div  class=cdmcmd >;i, Si, Sbi, Spi, Sci, <a href=CB-dw-ssi.cb2.html >Ssi</a>, Swi,   Pass <a href=CB-dzroz-as.cb2.html >as</a> args, dont bleed up</div></div><div  class=cdline ><div  class=cdrinum >267c</div><div  class=cdmcmd >;j, Sj, Sbj, Spj, Scj, Ssk, Swj    Some NOT <a href=CB-GAs-arg.cb2.html >arg</a>, just reuse, eg <a href=CB-ep4PAR-SSC.cb2.html >SSC</a>  Svi,Svj</div></div><div  class=cdline ><div  class=cdrinum >268c</div><div  class=cdmcmd >; i,Si~Ip ~IPc  pointer to INc()  inPointer </div></div><div  class=cdline ><div  class=cdrinum >269c</div><div  class=cdmcmd >;</div></div><div  class=cdline ><div  class=cdrinum >270c</div><div  class=cdmcmd >; SC State Chart  sic </div></div><div  class=cdline ><div  class=cdrinum >271c</div><div  class=cdmcmd >; SCF(Si,Sj)  @<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a> </div></div><div  class=cdline ><div  class=cdrinum >272c</div><div  class=cdmcmd >;</div></div></div><div  class=ft >by ^mwHmr 28 APR 2023 03:28 AM</div><h3> 28APR2023 03:28   by ^hgh</h3>
</body>
</html>
