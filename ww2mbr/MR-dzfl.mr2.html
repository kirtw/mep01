<!DOCTYPE html>
<html lang='en'>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>
^dzfl
</title>
<style> 
.hd  {font-size: 2em;}
body  {font-size:100%;}
.cdline  {font-family: "Courier New", monospace;   font-size: 1em;}
.cdline  {display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-between; }
.cdrinum  {flex: 1;}
.cdlabel  {flex: 5;}
.cdmcmd  {flex: 94;}
.cdline  {white-space:pre-wrap; }
.cdmcmd  {text-indent:5px white-space:pre-wrap;}
.cdline  {background-color:gray}
.cdrinum  {background-color:gold; width:100px ; margin-right:5px}
.cdlabel  {background-color:lightblue}
.cdmcmd  {background-color:lightpink}
a  {margin:5px 0px 5px 0px;}
.brcln  {display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-between; }
a  {flex: 1;}
.blink  {flex: 1;}
.brcln  {white-space:pre-wrap; flex-wrap: wrap;}
.brcln  {font-size: 1.4em; font-family: "Courier New", monospace; }
.blink  {margin-left: 10px;margin-right: 10px;text-decoration: none;}
.blink  {padding-left: 5px; padding-right: 20px;border: black solid 1px;}
.blink  {background-color: lightpink;}
.cursor  {background-color:lightyellow;}
</style>
</head>
<body>
<div  class=hd >MRoutine Page ^dzfl</div><a href=aa-TOC-All.zz2.html >TOC</a><div  class=brcln ><a href=aa-TOC-All.zz2.html >TOC</a><div  class=blink ><a href=RD-rzro3.rd2.html >rzro3/</a></div><div  class=blink ><a href=MR-dzfl.mr2.html >^dzfl</a></div><div  class=blink ><a href=./ >ww2m/*</a></div><div  class=blink ><a href=CB-dzfl.cb2.html >^dzfl</a></div><div  class=blink ><a href=CB-dzfl-A.cb2.html >A</a></div><div  class=blink ><a href=CB-dzfl-WXn.cb2.html >WXn</a></div><div  class=blink ><a href=CB-dzfl-WFL.cb2.html >WFL</a></div><div  class=blink ><a href=CB-dzfl-Q.cb2.html >Q</a></div><div  class=blink ><a href=CB-dzfl-durl.cb2.html >durl</a></div><div  class=blink ><a href=CB-dzfl-WF1.cb2.html >WF1</a></div></div><div  class=mcode ><div  class=cdline ><div  class=cdrinum >..1c</div><div  class=cdmcmd >dzfl   ;CKW/ESC i25sep20 gmsa/ rd2zro/  ; 20200925-95 ; Quick First lines, ala dzs, dir mode</div></div><div  class=cdline ><div  class=cdrinum >..2c</div><div  class=cdmcmd >;</div></div><div  class=cdline ><div  class=cdrinum >..3c</div><div  class=cdmcmd >;         ****   BREAK   ****  Too Complicated, Too dependent, Bad Idea</div></div><div  class=cdline ><div  class=cdrinum >..4c</div><div  class=cdmcmd >;</div></div><div  class=cdline ><div  class=cdrinum >..5c</div><div  class=cdmcmd >A     S <a href=CB-dzZlog-zro.cb2.html >zro</a>=$<a href=CB-dzZlog-zro.cb2.html >zro</a></div></div><div  class=cdline ><div  class=cdrinum >..6c</div><div  class=cdmcmd >      D ^dzroz(<a href=CB-dzZlog-zro.cb2.html >zro</a>)</div></div><div  class=cdline ><div  class=cdrinum >..7c</div><div  class=cdmcmd >      KILL rDIR S rDIR=0</div></div><div  class=cdline ><div  class=cdrinum >..8c</div><div  class=cdmcmd >      F oi=2:1 Q:$D(<a href=CB-dzdelo-zdir.cb2.html >zdir</a>(oi))=0  F si=1:1  Q:$D(<a href=CB-dzdelo-zdir.cb2.html >zdir</a>(oi,si))=0  DO  ;</div></div><div  class=cdline ><div  class=cdrinum >..9c</div><div  class=cdmcmd >        .S rDIR=rDIR+1,rDIR(rDIR)=<a href=CB-dzdelo-zdir.cb2.html >zdir</a>(oi,si)</div></div><div  class=cdline ><div  class=cdrinum >.10c</div><div  class=cdmcmd >        .W:$X ! W rDIR," ",?5,rDIR(rDIR),!</div></div><div  class=cdline ><div  class=cdrinum >.11c</div><div  class=cdmcmd >      R !,"which rdir(s):",X</div></div><div  class=cdline ><div  class=cdrinum >.12c</div><div  class=cdmcmd >        I X="." Q</div></div><div  class=cdline ><div  class=cdrinum >.13c</div><div  class=cdmcmd >      I X[" " S X=$<a href=CB-dzIzro-TR.cb2.html >TR</a>(X," ",",")</div></div><div  class=cdline ><div  class=cdrinum >.14c</div><div  class=cdmcmd >      F xi=1:1:$L(X,",") S <a href=CB-TOIimg-xn.cb2.html >xn</a>=$P(X,",") I <a href=CB-TOIimg-xn.cb2.html >xn</a>'="" D <a href=CB-dzfl-WXn.cb2.html >WXn</a>(<a href=CB-TOIimg-xn.cb2.html >xn</a>)</div></div><div  class=cdline ><div  class=cdrinum >.15c</div><div  class=cdmcmd >      Q</div></div><div  class=cdline ><div  class=cdrinum >.16c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >.17c</div><div  class=cdmcmd ><a href=CB-dzfl-WXn.cb2.html >WXn</a>(<a href=CB-TOIimg-xn.cb2.html >xn</a>)  I $G(<a href=CB-TOIimg-xn.cb2.html >xn</a>)="" Q</div></div><div  class=cdline ><div  class=cdrinum >.18c</div><div  class=cdmcmd >      S r=$G(rDIR(+<a href=CB-TOIimg-xn.cb2.html >xn</a>)) I r="" W " ? '",<a href=CB-TOIimg-xn.cb2.html >xn</a>,"' " Q</div></div><div  class=cdline ><div  class=cdrinum >.19c</div><div  class=cdmcmd >      D <a href=CB-dzfl-WFL.cb2.html >WFL</a>(r)</div></div><div  class=cdline ><div  class=cdrinum >.20c</div><div  class=cdmcmd >      Q</div></div><div  class=cdline ><div  class=cdrinum >.21c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >.22c</div><div  class=cdmcmd ><a href=CB-dzfl-WFL.cb2.html >WFL</a>(<a href=CB-dzfl-durl.cb2.html >durl</a>)  NEW Q S Q=""</div></div><div  class=cdline ><div  class=cdrinum >.23c</div><div  class=cdmcmd >      I $G(<a href=CB-dzfl-durl.cb2.html >durl</a>)="" D b^dv("Bug arg","durl") Q</div></div><div  class=cdline ><div  class=cdrinum >.24c</div><div  class=cdmcmd >      S n=$L(<a href=CB-dzfl-durl.cb2.html >durl</a>,"/"),<a href=CB-dzMa-ns.cb2.html >ns</a>=$P(<a href=CB-dzfl-durl.cb2.html >durl</a>,"/",n) I <a href=CB-dzMa-ns.cb2.html >ns</a>="" S <a href=CB-dzMa-ns.cb2.html >ns</a>="*.m"</div></div><div  class=cdline ><div  class=cdrinum >.25c</div><div  class=cdmcmd >      E  S $P(<a href=CB-dzfl-durl.cb2.html >durl</a>,"/",n)=""  ; remove any <a href=CB-dzMa-ns.cb2.html >ns</a> to <a href=CB-dzMa-ns.cb2.html >ns</a></div></div><div  class=cdline ><div  class=cdrinum >.26c</div><div  class=cdmcmd >      I $E(<a href=CB-dzfl-durl.cb2.html >durl</a>,$L(<a href=CB-dzfl-durl.cb2.html >durl</a>))'="/" S <a href=CB-dzfl-durl.cb2.html >durl</a>=<a href=CB-dzfl-durl.cb2.html >durl</a>_"/" D b^dv("Add / on <a href=CB-dzfl-durl.cb2.html >durl</a> end","durl")</div></div><div  class=cdline ><div  class=cdrinum >.27c</div><div  class=cdmcmd >      S <a href=CB-dzMa-olf.cb2.html >olf</a>=$ZSEARCH(<a href=CB-dzfl-durl.cb2.html >durl</a>_"aa-*.olf")</div></div><div  class=cdline ><div  class=cdrinum >.28c</div><div  class=cdmcmd >      I <a href=CB-dzMa-olf.cb2.html >olf</a>="" S <a href=CB-dzMa-olf.cb2.html >olf</a>="",<a href=CB-dzMa-ns.cb2.html >ns</a>="*.m"</div></div><div  class=cdline ><div  class=cdrinum >.29c</div><div  class=cdmcmd >      D ^mbsAF(<a href=CB-dzMa-olf.cb2.html >olf</a>)  ; : qF(sq)  via <a href=CB-dzMa-olf.cb2.html >olf</a></div></div><div  class=cdline ><div  class=cdrinum >.30c</div><div  class=cdmcmd >      ;</div></div><div  class=cdline ><div  class=cdrinum >.31c</div><div  class=cdmcmd >      F sq=1:1:qF S furl=qF(sq) DO</div></div><div  class=cdline ><div  class=cdrinum >.32c</div><div  class=cdmcmd >        .S Q=$$^devRD(furl,,"RM") I Q'="" Goto Q</div></div><div  class=cdline ><div  class=cdrinum >.33c</div><div  class=cdmcmd >        .S Q=$$<a href=CB-dzfl-durl.cb2.html >durl</a>(furl) ; : </div></div><div  class=cdline ><div  class=cdrinum >.34c</div><div  class=cdmcmd >        .S <a href=CB-dmnu-L1.cb2.html >L1</a>=RM(1),mFL=$P(<a href=CB-dmnu-L1.cb2.html >L1</a>,";",4)</div></div><div  class=cdline ><div  class=cdrinum >.35c</div><div  class=cdmcmd >        .D <a href=CB-dzfl-WF1.cb2.html >WF1</a></div></div><div  class=cdline ><div  class=cdrinum >.36c</div><div  class=cdmcmd >Q     Q:$Q Q</div></div><div  class=cdline ><div  class=cdrinum >.37c</div><div  class=cdmcmd >      Q</div></div><div  class=cdline ><div  class=cdrinum >.38c</div><div  class=cdmcmd >;*$$Q  : Fil, <a href=CB-dzMa-ns.cb2.html >ns</a>, Fol, mpj, <a href=CB-KG0-base.cb2.html >Base</a></div></div><div  class=cdline ><div  class=cdrinum >.39c</div><div  class=cdmcmd ><a href=CB-dzfl-durl.cb2.html >durl</a>(url) NEW Q,m,n S Q=""  I $G(url)="" S Q="Arg durl^dzfl" D b^dv(Q,"Q,url") Q Q</div></div><div  class=cdline ><div  class=cdrinum >.40c</div><div  class=cdmcmd >      S n=$L(url,"/"),<a href=CB-dzMa-ns.cb2.html >ns</a>=$P(url,"/",n),Fil=""</div></div><div  class=cdline ><div  class=cdrinum >.41c</div><div  class=cdmcmd >      I <a href=CB-dzMa-ns.cb2.html >ns</a>="" S <a href=CB-dzMa-ns.cb2.html >ns</a>="*.m"</div></div><div  class=cdline ><div  class=cdrinum >.42c</div><div  class=cdmcmd >      E  I <a href=CB-dzMa-ns.cb2.html >ns</a>'["*" S Fil=<a href=CB-dzMa-ns.cb2.html >ns</a>,<a href=CB-dzMa-ns.cb2.html >ns</a>=""</div></div><div  class=cdline ><div  class=cdrinum >.43c</div><div  class=cdmcmd >      S m=$L(Fil,"."),ext=$P(Fil,".",m)</div></div><div  class=cdline ><div  class=cdrinum >.44c</div><div  class=cdmcmd >      S Fnm=$P(Fil,".")  ; first only even if m&gt;2</div></div><div  class=cdline ><div  class=cdrinum >.45c</div><div  class=cdmcmd >      S mpj=$P(url,"/",n-2)</div></div><div  class=cdline ><div  class=cdrinum >.46c</div><div  class=cdmcmd >      S <a href=CB-KG0-base.cb2.html >Base</a>=$P(url,"/",1,n-2)  ; includes mpj</div></div><div  class=cdline ><div  class=cdrinum >.47c</div><div  class=cdmcmd >      Q Q</div></div><div  class=cdline ><div  class=cdrinum >.48c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >.49c</div><div  class=cdmcmd ><a href=CB-dzfl-WF1.cb2.html >WF1</a>   ;</div></div><div  class=cdline ><div  class=cdrinum >.50c</div><div  class=cdmcmd >      USE $P W:$X ! W $G(Fnm),"  ",?15,$G(mFL),!</div></div><div  class=cdline ><div  class=cdrinum >.51c</div><div  class=cdmcmd >      Q</div></div><div  class=cdline ><div  class=cdrinum >.52c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >.53c</div><div  class=cdmcmd ></div></div><div  class=cdline ><div  class=cdrinum >.54c</div><div  class=cdmcmd >      S Fol=$P(url,"/",n-1)</div></div><div  class=cdline ><div  class=cdrinum >.55c</div><div  class=cdmcmd ></div></div><div  class=cdline ><div  class=cdrinum >.56c</div><div  class=cdmcmd >      </div></div><div  class=cdline ><div  class=cdrinum >.57c</div><div  class=cdmcmd >      </div></div></div><div  class=ft >by ^mwHmr 07 APR 2023 10:17 PM</div><h3> 07APR2023 22:17   by ^hgh</h3>
</body>
</html>
