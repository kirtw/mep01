<!DOCTYPE html>
<html lang='en'>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>
^ep4W
</title>
<style> 
.hd  {font-size: 2em;}
body  {font-size:100%;}
.cdline  {font-family: "Courier New", monospace;   font-size: 1em;}
.cdline  {display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-between; }
.cdrinum  {flex: 1;}
.cdlabel  {flex: 5;}
.cdmcmd  {flex: 94;}
.cdline  {white-space:pre-wrap; }
.cdmcmd  {text-indent:5px white-space:pre-wrap;}
.cdline  {background-color:gray}
.cdrinum  {background-color:gold; width:100px ; margin-right:5px}
.cdlabel  {background-color:lightblue}
.cdmcmd  {background-color:lightpink}
a  {margin:5px 0px 5px 0px;}
.brcln  {display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: space-between; }
a  {flex: 1;}
.blink  {flex: 1;}
.brcln  {white-space:pre-wrap; flex-wrap: wrap;}
.brcln  {font-size: 1.4em; font-family: "Courier New", monospace; }
.blink  {margin-left: 10px;margin-right: 10px;text-decoration: none;}
.blink  {padding-left: 5px; padding-right: 20px;border: black solid 1px;}
.blink  {background-color: lightpink;}
.cursor  {background-color:lightyellow;}
</style>
</head>
<body>
<div  class=hd >MRoutine Page ^ep4W</div><a href=aa-TOC-All.zz2.html >TOC</a><div  class=brcln ><a href=aa-TOC-All.zz2.html >TOC</a><div  class=blink ><a href=RD-rmep4.rd2.html >rmep4/</a></div><div  class=blink ><a href=MR-ep4W.mr2.html >^ep4W</a></div><div  class=blink ><a href=./ >ww2m/*</a></div><div  class=blink ><a href=CB-ep4W.cb2.html >^ep4W</a></div><div  class=blink ><a href=CB-ep4W-top.cb2.html >top</a></div><div  class=blink ><a href=CB-ep4W-TSQ.cb2.html >TSQ</a></div><div  class=blink ><a href=CB-ep4W-getR1.cb2.html >getR1</a></div><div  class=blink ><a href=CB-ep4W-FO.cb2.html >FO</a></div><div  class=blink ><a href=CB-ep4W-Wmdk.cb2.html >Wmdk</a></div><div  class=blink ><a href=CB-ep4W-Q.cb2.html >Q</a></div><div  class=blink ><a href=CB-ep4W-Qb.cb2.html >Qb</a></div><div  class=blink ><a href=CB-ep4W-qd.cb2.html >qd</a></div><div  class=blink ><a href=CB-ep4W-SVpg.cb2.html >SVpg</a></div><div  class=blink ><a href=CB-ep4W-FLg0.cb2.html >FLg0</a></div><div  class=blink ><a href=CB-ep4W-WGR.cb2.html >WGR</a></div><div  class=blink ><a href=CB-ep4W-WG2.cb2.html >WG2</a></div><div  class=blink ><a href=CB-ep4W-WG1.cb2.html >WG1</a></div><div  class=blink ><a href=CB-ep4W-FLg1.cb2.html >FLg1</a></div><div  class=blink ><a href=CB-ep4W-FLi1.cb2.html >FLi1</a></div><div  class=blink ><a href=CB-ep4W-WSC.cb2.html >WSC</a></div><div  class=blink ><a href=CB-ep4W-WS.cb2.html >WS</a></div><div  class=blink ><a href=CB-ep4W-W1Sq.cb2.html >W1Sq</a></div><div  class=blink ><a href=CB-ep4W-W1Sij.cb2.html >W1Sij</a></div><div  class=blink ><a href=CB-ep4W-Witem.cb2.html >Witem</a></div><div  class=blink ><a href=CB-ep4W-Itab.cb2.html >Itab</a></div><div  class=blink ><a href=CB-ep4W-WSCLua.cb2.html >WSCLua</a></div><div  class=blink ><a href=CB-ep4W-WSL.cb2.html >WSL</a></div><div  class=blink ><a href=CB-ep4W-WLLua.cb2.html >WLLua</a></div><div  class=blink ><a href=CB-ep4W-WIN.cb2.html >WIN</a></div><div  class=blink ><a href=CB-ep4W-DSP.cb2.html >DSP</a></div><div  class=blink ><a href=CB-ep4W-TSP.cb2.html >TSP</a></div></div><div  class=mcode ><div  class=cdline ><div  class=cdrinum >..1c</div><div  class=cdmcmd >ep4W  ;CKW/ESC i31oct22 umbr./ rmep2/ ;20221031-60;Write sr for parser data structures</div></div><div  class=cdline ><div  class=cdrinum >..2c</div><div  class=cdmcmd >;</div></div><div  class=cdline ><div  class=cdrinum >..3c</div><div  class=cdmcmd >;</div></div><div  class=cdline ><div  class=cdrinum >..4c</div><div  class=cdmcmd >;</div></div><div  class=cdline ><div  class=cdrinum >..5c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >..6c</div><div  class=cdmcmd ><a href=CB-kfmUafl-top.cb2.html >top</a>    D b^dv("No <a href=CB-kfmUafl-top.cb2.html >top</a> entry -^"_$T(+0),"ruid")</div></div><div  class=cdline ><div  class=cdrinum >..7c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >..8c</div><div  class=cdmcmd >;</div></div><div  class=cdline ><div  class=cdrinum >..9c</div><div  class=cdmcmd >;   tsq.  ^epqMenu</div></div><div  class=cdline ><div  class=cdrinum >.10c</div><div  class=cdmcmd >;*  Trace IR(SSp)=prior SSp=Si.Sj</div></div><div  class=cdline ><div  class=cdrinum >.11c</div><div  class=cdmcmd ><a href=CB-ep4W-TSQ.cb2.html >TSQ</a>(<a href=CB-dzroz-ss.cb2.html >SS</a>)  ;I '$G(<a href=CB-dzroz-ss.cb2.html >SS</a>) D bug^dv Q</div></div><div  class=cdline ><div  class=cdrinum >.12c</div><div  class=cdmcmd >       I $D(SCF)=0 D bug^dv("NO SCF()","SCF") Q</div></div><div  class=cdline ><div  class=cdrinum >.13c</div><div  class=cdmcmd >       S <a href=CB-dzroz-ss.cb2.html >SS</a>=10.3  ;complete parse</div></div><div  class=cdline ><div  class=cdrinum >.14c</div><div  class=cdmcmd >       USE $P W:$X ! W "Trace SSp- ",<a href=CB-dzroz-ss.cb2.html >SS</a></div></div><div  class=cdline ><div  class=cdrinum >.15c</div><div  class=cdmcmd >       F qi=1:1  Q:'<a href=CB-dzroz-ss.cb2.html >SS</a>  S Si=$P(<a href=CB-dzroz-ss.cb2.html >SS</a>,"."),Sj=$P(<a href=CB-dzroz-ss.cb2.html >SS</a>,".",2) D <a href=CB-ep4W-W1Sij.cb2.html >W1Sij</a> S <a href=CB-dzroz-ss.cb2.html >SS</a>=$G(IR(<a href=CB-dzroz-ss.cb2.html >SS</a>)) Q:'<a href=CB-dzroz-ss.cb2.html >SS</a></div></div><div  class=cdline ><div  class=cdrinum >.16c</div><div  class=cdmcmd >       W !</div></div><div  class=cdline ><div  class=cdrinum >.17c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >.18c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >.19c</div><div  class=cdmcmd >;*  dot, <a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a> : nLst, tokR1, tokTy {R,T, C}</div></div><div  class=cdline ><div  class=cdrinum >.20c</div><div  class=cdmcmd ><a href=CB-ep4W-getR1.cb2.html >getR1</a>  I $G(dot)="" D bug^dv Q</div></div><div  class=cdline ><div  class=cdrinum >.21c</div><div  class=cdmcmd >       I 'dot D b^dv("dot NOT zero","dot,ruid,ruab") Q</div></div><div  class=cdline ><div  class=cdrinum >.22c</div><div  class=cdmcmd >       ; dot=1 <a href=CB-KGD-init.cb2.html >init</a>, dot points to first in <a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a></div></div><div  class=cdline ><div  class=cdrinum >.23c</div><div  class=cdmcmd >       I $G(<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>)="" S Q="Err no <a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a> <a href=CB-GAs-arg.cb2.html >arg</a> getR1^"_$T(+0) D b^dv(Q,"Q,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,ruid,dot") Q</div></div><div  class=cdline ><div  class=cdrinum >.24c</div><div  class=cdmcmd >       S nLst=$L(<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,",")</div></div><div  class=cdline ><div  class=cdrinum >.25c</div><div  class=cdmcmd >       S tokR1=$P(<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,",",dot)</div></div><div  class=cdline ><div  class=cdrinum >.26c</div><div  class=cdmcmd >       I tokR1="" DO  ;</div></div><div  class=cdline ><div  class=cdrinum >.27c</div><div  class=cdmcmd >         .S tokTy="C"</div></div><div  class=cdline ><div  class=cdrinum >.28c</div><div  class=cdmcmd >         .I dot'=(nLst+1) D b^dv("C dot ?","dot,nLst,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,tokR1,tokTy")</div></div><div  class=cdline ><div  class=cdrinum >.29c</div><div  class=cdmcmd >       I tokR1'="" S tokTy="R" I $E(tokR1)?1U S tokTy="T"</div></div><div  class=cdline ><div  class=cdrinum >.30c</div><div  class=cdmcmd >        I $G(Wmo)["tokR1" DO  ;</div></div><div  class=cdline ><div  class=cdrinum >.31c</div><div  class=cdmcmd >           .W:$X ! W "sr tokR1 ",Si,".",Sj," .",dot," in ",<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,"' "</div></div><div  class=cdline ><div  class=cdrinum >.32c</div><div  class=cdmcmd >           .W "  -&gt;",tokR1," ty:",tokTy,!</div></div><div  class=cdline ><div  class=cdrinum >.33c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >.34c</div><div  class=cdmcmd >;*  : LST  </div></div><div  class=cdline ><div  class=cdrinum >.35c</div><div  class=cdmcmd ><a href=CB-ep4W-FO.cb2.html >FO</a>(dot,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>) ;D bug^dv Q</div></div><div  class=cdline ><div  class=cdrinum >.36c</div><div  class=cdmcmd >       S LST="" F ti=1:1:$L(<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,",") DO  ;</div></div><div  class=cdline ><div  class=cdrinum >.37c</div><div  class=cdmcmd >         .I ti&lt;0 S LST=LST_"      " Q</div></div><div  class=cdline ><div  class=cdrinum >.38c</div><div  class=cdmcmd >         .I ti=dot S LST=LST_"  *   "  ;continue</div></div><div  class=cdline ><div  class=cdrinum >.39c</div><div  class=cdmcmd >         .S tok=$P(<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,",",ti) </div></div><div  class=cdline ><div  class=cdrinum >.40c</div><div  class=cdmcmd >         .I tok="" S tok="      "</div></div><div  class=cdline ><div  class=cdrinum >.41c</div><div  class=cdmcmd >         .S tok=tok_$E("       ",$L(tok),6) I $L(tok)'=7 D b^dv("Err pad","tok,dot,ri")</div></div><div  class=cdline ><div  class=cdrinum >.42c</div><div  class=cdmcmd >         .S LST=LST_tok</div></div><div  class=cdline ><div  class=cdrinum >.43c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >.44c</div><div  class=cdmcmd >;*  Dump GRk and SCF  to mep-SCF.mdk  in dmep  admep to compile</div></div><div  class=cdline ><div  class=cdrinum >.45c</div><div  class=cdmcmd ><a href=CB-ep4W-Wmdk.cb2.html >Wmdk</a>   NEW Q S Q=""  D ^devIB  ; : PB</div></div><div  class=cdline ><div  class=cdrinum >.46c</div><div  class=cdmcmd >       S Fil="mep-v4-SCF.mdk"</div></div><div  class=cdline ><div  class=cdrinum >.47c</div><div  class=cdmcmd >       S devm=PB_"dmep/"_Fil</div></div><div  class=cdline ><div  class=cdrinum >.48c</div><div  class=cdmcmd >       S Q=$$OFW^devIO(devm) I Q'="" Goto Q</div></div><div  class=cdline ><div  class=cdrinum >.49c</div><div  class=cdmcmd >       USE devm</div></div><div  class=cdline ><div  class=cdrinum >.50c</div><div  class=cdmcmd >       W:$X ! W "== mep Tables  ^ep4*  rmep4/  ",!</div></div><div  class=cdline ><div  class=cdrinum >.51c</div><div  class=cdmcmd >       W !!,"--",!," Grammar then SCF State Tables Dump",!!</div></div><div  class=cdline ><div  class=cdrinum >.52c</div><div  class=cdmcmd >       D <a href=CB-ep4W-WSC.cb2.html >WSC</a></div></div><div  class=cdline ><div  class=cdrinum >.53c</div><div  class=cdmcmd >       D <a href=CB-ep4W-WSCLua.cb2.html >WSCLua</a></div></div><div  class=cdline ><div  class=cdrinum >.54c</div><div  class=cdmcmd >       ;D <a href=CB-ep4W-WGR.cb2.html >WGR</a>       </div></div><div  class=cdline ><div  class=cdrinum >.55c</div><div  class=cdmcmd >       W !!,"--",!</div></div><div  class=cdline ><div  class=cdrinum >.56c</div><div  class=cdmcmd >       D CFM^devIO(devm)</div></div><div  class=cdline ><div  class=cdrinum >.57c</div><div  class=cdmcmd >       D <a href=CB-ep4W-SVpg.cb2.html >SVpg</a>("SCF","SCF and Grammar mdk",devm)</div></div><div  class=cdline ><div  class=cdrinum >.58c</div><div  class=cdmcmd >       Goto Q</div></div><div  class=cdline ><div  class=cdrinum >.59c</div><div  class=cdmcmd >;* Common Exit</div></div><div  class=cdline ><div  class=cdrinum >.60c</div><div  class=cdmcmd >Q      Q:$Q Q D:Q'="" <a href=CB-kfmUafl-qd.cb2.html >qd</a> Q</div></div><div  class=cdline ><div  class=cdrinum >.61c</div><div  class=cdmcmd ><a href=CB-kfmUafl-Qb.cb2.html >Qb</a>     D <a href=CB-kfmUafl-qd.cb2.html >qd</a> Q:$Q Q Q</div></div><div  class=cdline ><div  class=cdrinum >.62c</div><div  class=cdmcmd ><a href=CB-kfmUafl-qd.cb2.html >qd</a>     D b^dv("Err ^"_$T(+0),"ruid,ruab,ruLst")</div></div><div  class=cdline ><div  class=cdrinum >.63c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >.64c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >.65c</div><div  class=cdmcmd ><a href=CB-ep4W-SVpg.cb2.html >SVpg</a>(id,txt,url)</div></div><div  class=cdline ><div  class=cdrinum >.66c</div><div  class=cdmcmd >       NEW Q S Q="" ;I $$arg^?("id,txt,url") Goto <a href=CB-kfmUafl-Qb.cb2.html >Qb</a></div></div><div  class=cdline ><div  class=cdrinum >.67c</div><div  class=cdmcmd >       D SFL^kfm("txt,url","_^MEg(id)")  ; no *FL</div></div><div  class=cdline ><div  class=cdrinum >.68c</div><div  class=cdmcmd >       Goto Q</div></div><div  class=cdline ><div  class=cdrinum >.69c</div><div  class=cdmcmd >;*  GRk(ruid)=@<a href=CB-epaIMG-grFL.cb2.html >grFL</a>,   Gxi(runa,gi)=ruid ?</div></div><div  class=cdline ><div  class=cdrinum >.70c</div><div  class=cdmcmd ><a href=CB-ep4W-FLg0.cb2.html >FLg0</a>   ;;<a href=CB-epaIMG-grFL.cb2.html >grFL</a>:runa,ruab,ruty,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,nLst,tokCL,nLCL,Lna,rude_GRk(ruid)</div></div><div  class=cdline ><div  class=cdrinum >.71c</div><div  class=cdmcmd >;</div></div><div  class=cdline ><div  class=cdrinum >.72c</div><div  class=cdmcmd >; This is all static after <a href=CB-KGD-init.cb2.html >init</a> <a href=CB-KGD-setup.cb2.html >setup</a> by IG</div></div><div  class=cdline ><div  class=cdrinum >.73c</div><div  class=cdmcmd ><a href=CB-ep4W-WGR.cb2.html >WGR</a>    I $D(GRk)=0 D bug^dv("Array GRk <a href=CB-dve-UNDEF.cb2.html >UNDEF</a>.","GRk,Gxi") Q</div></div><div  class=cdline ><div  class=cdrinum >.74c</div><div  class=cdmcmd >       I $D(Gxi)=0 D bug^dv("Array Gxi <a href=CB-dve-UNDEF.cb2.html >UNDEF</a>.","GRk,Gxi") Q</div></div><div  class=cdline ><div  class=cdrinum >.75c</div><div  class=cdmcmd >       W !!," Grammar GRk() rules-"</div></div><div  class=cdline ><div  class=cdrinum >.76c</div><div  class=cdmcmd >       D ^epaIMG ; : <a href=CB-epaIMG-grFL.cb2.html >grFL</a></div></div><div  class=cdline ><div  class=cdrinum >.77c</div><div  class=cdmcmd >       NEW ruid,ruab,ina,rugi,ruab,ti,rude,runa,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,tok</div></div><div  class=cdline ><div  class=cdrinum >.78c</div><div  class=cdmcmd >       F ruid=1:1  Q:$D(GRk(ruid))=0    DO  ;</div></div><div  class=cdline ><div  class=cdrinum >.79c</div><div  class=cdmcmd >         .D GFL^kfm(<a href=CB-epaIMG-grFL.cb2.html >grFL</a>)</div></div><div  class=cdline ><div  class=cdrinum >.80c</div><div  class=cdmcmd >         .S xLst=<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>_tokCL ; either or</div></div><div  class=cdline ><div  class=cdrinum >.81c</div><div  class=cdmcmd >         .D <a href=CB-ep4W-WG2.cb2.html >WG2</a>,<a href=CB-ep4W-WG1.cb2.html >WG1</a></div></div><div  class=cdline ><div  class=cdrinum >.82c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >.83c</div><div  class=cdmcmd >;*  Derive alt fields : rugi</div></div><div  class=cdline ><div  class=cdrinum >.84c</div><div  class=cdmcmd ><a href=CB-ep4W-WG2.cb2.html >WG2</a>    S rugi=$P(ruab,".",2)</div></div><div  class=cdline ><div  class=cdrinum >.85c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >.86c</div><div  class=cdmcmd >;*  ruid, @<a href=CB-epaIMG-grFL.cb2.html >grFL</a> </div></div><div  class=cdline ><div  class=cdrinum >.87c</div><div  class=cdmcmd ><a href=CB-ep4W-WG1.cb2.html >WG1</a>    W:$X ! W " ",ruid," "   NEW x</div></div><div  class=cdline ><div  class=cdrinum >.88c</div><div  class=cdmcmd >       W ?4,ruab," "</div></div><div  class=cdline ><div  class=cdrinum >.89c</div><div  class=cdmcmd >       W ?14," -&gt; ",ruty,"  ",xLst,"  "</div></div><div  class=cdline ><div  class=cdrinum >.90c</div><div  class=cdmcmd >       I Lna'="" W ?40,Lna,"  "</div></div><div  class=cdline ><div  class=cdrinum >.91c</div><div  class=cdmcmd >       I rude'="" S x=40 S:$X&gt;40 x=55 W ?x,rude," "</div></div><div  class=cdline ><div  class=cdrinum >.92c</div><div  class=cdmcmd >       W !</div></div><div  class=cdline ><div  class=cdrinum >.93c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >.94c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >.95c</div><div  class=cdmcmd ><a href=CB-epaIMG-FLg1.cb2.html >FLg1</a>   ;;<a href=CB-epaIMG-grFL.cb2.html >grFL</a>:runa,ruab,ruty,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,nLst,tokCL,nLCL,Lna,rude_GRk(ruid)</div></div><div  class=cdline ><div  class=cdrinum >.96c</div><div  class=cdmcmd ><a href=CB-epaIMG-FLi1.cb2.html >FLi1</a>   ;;<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>:runa,ruab,ruid,ikey,svSSq,IPs,IPe,dot,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,tokR1,tokTy,ruby,frm_SCF(Si,Sj)</div></div><div  class=cdline ><div  class=cdrinum >.97c</div><div  class=cdmcmd >;*  SCF()  Write all, Lua Loup Compatible output lines</div></div><div  class=cdline ><div  class=cdrinum >.98c</div><div  class=cdmcmd >;* Called by <a href=CB-ep4W-Wmdk.cb2.html >Wmdk</a> to <a href=CB-KGD-save.cb2.html >save</a> <a href=CB-dzroz-as.cb2.html >as</a> file</div></div><div  class=cdline ><div  class=cdrinum >.99c</div><div  class=cdmcmd ><a href=CB-ep4W-WSC.cb2.html >WSC</a>(M) W !!," Complete Table-",!!</div></div><div  class=cdline ><div  class=cdrinum >100c</div><div  class=cdmcmd >       NEW Si,Sj    </div></div><div  class=cdline ><div  class=cdrinum >101c</div><div  class=cdmcmd >       F Si=1:1 Q:$D(SCF(Si))=0  D <a href=CB-ep4W-WS.cb2.html >WS</a>(Si)</div></div><div  class=cdline ><div  class=cdrinum >102c</div><div  class=cdmcmd >       USE $P W !!</div></div><div  class=cdline ><div  class=cdrinum >103c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >104c</div><div  class=cdmcmd >;*  SCF(Si)</div></div><div  class=cdline ><div  class=cdrinum >105c</div><div  class=cdmcmd ><a href=CB-ep4W-WS.cb2.html >WS</a>(Si,M)  W:$X ! W !,"  SEarly:",Si-1,"   ====++Si ",Si," ++====  "</div></div><div  class=cdline ><div  class=cdrinum >106c</div><div  class=cdmcmd >       S C=$E(Ins,Si) I C'="" W " In:'",C,"'",!</div></div><div  class=cdline ><div  class=cdrinum >107c</div><div  class=cdmcmd >       NEW runa,ruab,IPs,IPe,IC,dot,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,nLst,tokR1,ruDone,ruby,rufrm</div></div><div  class=cdline ><div  class=cdrinum >108c</div><div  class=cdmcmd >       F Sj=1:1 Q:$D(SCF(Si,Sj))=0   D <a href=CB-ep4W-W1Sij.cb2.html >W1Sij</a>  ;</div></div><div  class=cdline ><div  class=cdrinum >109c</div><div  class=cdmcmd >       W !</div></div><div  class=cdline ><div  class=cdrinum >110c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >111c</div><div  class=cdmcmd >;*           </div></div><div  class=cdline ><div  class=cdrinum >112c</div><div  class=cdmcmd ><a href=CB-ep4W-W1Sq.cb2.html >W1Sq</a>(SSq)  ;</div></div><div  class=cdline ><div  class=cdrinum >113c</div><div  class=cdmcmd >       S <a href=CB-dzroz-ss.cb2.html >SS</a>=DSQ(SSq),Si=$P(<a href=CB-dzroz-ss.cb2.html >SS</a>,"."),Sj=$P(<a href=CB-dzroz-ss.cb2.html >SS</a>,".",2)</div></div><div  class=cdline ><div  class=cdrinum >114c</div><div  class=cdmcmd >         ;falls thru  alt entry/SSq vs Si,Sj input</div></div><div  class=cdline ><div  class=cdrinum >115c</div><div  class=cdmcmd ><a href=CB-ep4W-W1Sij.cb2.html >W1Sij</a>   D GFL^jfm("svSSq,ruid,ruab,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,dot,IPs,IPe,tokR1,tokTy,frm",<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>) ;</div></div><div  class=cdline ><div  class=cdrinum >116c</div><div  class=cdmcmd >       D <a href=CB-ep4W-Witem.cb2.html >Witem</a></div></div><div  class=cdline ><div  class=cdrinum >117c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >118c</div><div  class=cdmcmd >;*  Write One item  Maximize Utility mep  vs <a href=CB-ep4W-WS.cb2.html >WS</a> ala Earley/LoupLua</div></div><div  class=cdline ><div  class=cdrinum >119c</div><div  class=cdmcmd >;*  Si,Sj, @<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>  ruid,ruab,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,dot,IPs,   IPe,tokR1,tokTy</div></div><div  class=cdline ><div  class=cdrinum >120c</div><div  class=cdmcmd ><a href=CB-ep4W-Witem.cb2.html >Witem</a>(M)  NEW i,tok</div></div><div  class=cdline ><div  class=cdrinum >121c</div><div  class=cdmcmd >       D <a href=CB-ep4W-Itab.cb2.html >Itab</a>("10,10,5,8,8,8,12,10,10") ; : tb(i) from width list</div></div><div  class=cdline ><div  class=cdrinum >122c</div><div  class=cdmcmd >       S M=$G(M) I M'="" S M=M_": " </div></div><div  class=cdline ><div  class=cdrinum >123c</div><div  class=cdmcmd >       S IC=$E(Ins,IPs,IPe)</div></div><div  class=cdline ><div  class=cdrinum >124c</div><div  class=cdmcmd >       W:$X ! W !</div></div><div  class=cdline ><div  class=cdrinum >125c</div><div  class=cdmcmd >       I $G(frm)'="" W ?5,frm,! ;D b^dv("Log frm","frm")</div></div><div  class=cdline ><div  class=cdrinum >126c</div><div  class=cdmcmd >       W M,svSSq," ",?3,Si,".",Sj," ",ruab,"/",ruid,"  " </div></div><div  class=cdline ><div  class=cdrinum >127c</div><div  class=cdmcmd >       D <a href=CB-ep4W-FO.cb2.html >FO</a>(dot,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>) ; : LST</div></div><div  class=cdline ><div  class=cdrinum >128c</div><div  class=cdmcmd >       ;S FL="runa,IPs,IPe,dot,LST,...</div></div><div  class=cdline ><div  class=cdrinum >129c</div><div  class=cdmcmd >       W ?tb(2)," -&gt; "</div></div><div  class=cdline ><div  class=cdrinum >130c</div><div  class=cdmcmd >       W "{",$G(IC),"}  .",dot," "</div></div><div  class=cdline ><div  class=cdrinum >131c</div><div  class=cdmcmd >       S tb=2 F i=1:1:$L(<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,",")+1 S tok=$P(<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,",",i) DO  </div></div><div  class=cdline ><div  class=cdrinum >132c</div><div  class=cdmcmd >         .S tb=tb+1 I dot=i W ?tb(tb),"  *  " S tb=tb+1</div></div><div  class=cdline ><div  class=cdrinum >133c</div><div  class=cdmcmd >         .I tok'="" W ?tb(tb),tok," "</div></div><div  class=cdline ><div  class=cdrinum >134c</div><div  class=cdmcmd >       W ?tb(7),$G(tokTy)," ",$G(tokR1)," "</div></div><div  class=cdline ><div  class=cdrinum >135c</div><div  class=cdmcmd >       W ?tb(8)," {",IPs,"-",$G(IPe),"} "</div></div><div  class=cdline ><div  class=cdrinum >136c</div><div  class=cdmcmd >       W:$X !</div></div><div  class=cdline ><div  class=cdrinum >137c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >138c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >139c</div><div  class=cdmcmd ><a href=CB-ep4W-Itab.cb2.html >Itab</a>(WL)   KILL tb S tb=7  NEW w,i</div></div><div  class=cdline ><div  class=cdrinum >140c</div><div  class=cdmcmd >       I $G(WL)="" S WL="3,3,10,15,15,15,15,20" ; ? something</div></div><div  class=cdline ><div  class=cdrinum >141c</div><div  class=cdmcmd >       F i=1:1:$L(WL,",") S w=$P(WL,",",i),tb(i)=tb,tb=tb+w</div></div><div  class=cdline ><div  class=cdrinum >142c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >143c</div><div  class=cdmcmd >;*     * * * *</div></div><div  class=cdline ><div  class=cdrinum >144c</div><div  class=cdmcmd >;*  SCF()  Write all, Lua Loup Compatible output lines</div></div><div  class=cdline ><div  class=cdrinum >145c</div><div  class=cdmcmd >;* Called by <a href=CB-ep4W-Wmdk.cb2.html >Wmdk</a> to <a href=CB-KGD-save.cb2.html >save</a> <a href=CB-dzroz-as.cb2.html >as</a> file</div></div><div  class=cdline ><div  class=cdrinum >146c</div><div  class=cdmcmd ><a href=CB-ep4W-WSCLua.cb2.html >WSCLua</a> W !!," Complete Lua Table-",!!</div></div><div  class=cdline ><div  class=cdrinum >147c</div><div  class=cdmcmd >       NEW Si,Sj    </div></div><div  class=cdline ><div  class=cdrinum >148c</div><div  class=cdmcmd >       F Si=1:1 Q:$D(SCF(Si))=0  D <a href=CB-ep4W-WSL.cb2.html >WSL</a>(Si)</div></div><div  class=cdline ><div  class=cdrinum >149c</div><div  class=cdmcmd >       USE $P W !!</div></div><div  class=cdline ><div  class=cdrinum >150c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >151c</div><div  class=cdmcmd >;*  SCF(Si)</div></div><div  class=cdline ><div  class=cdrinum >152c</div><div  class=cdmcmd ><a href=CB-ep4W-WSL.cb2.html >WSL</a>(Si)  W:$X ! W !,"     ====== ",Si-1," ======",!</div></div><div  class=cdline ><div  class=cdrinum >153c</div><div  class=cdmcmd >       NEW runa,ruab,IPs,IPe,IC,dot,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,nLst,tokR1,ruDone,ruby,rufrm</div></div><div  class=cdline ><div  class=cdrinum >154c</div><div  class=cdmcmd >       F Sj=1:1 Q:$D(SCF(Si,Sj))=0   DO  ;</div></div><div  class=cdline ><div  class=cdrinum >155c</div><div  class=cdmcmd >         .D GFL^jfm("svSSq,ruid,ruab,runa,<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,dot,IPs,IPe,tokR1,tokTy,frm",<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>) ;</div></div><div  class=cdline ><div  class=cdrinum >156c</div><div  class=cdmcmd >         .S Lna=$G(GRk(ruid,"Lna"))</div></div><div  class=cdline ><div  class=cdrinum >157c</div><div  class=cdmcmd >         .D <a href=CB-ep4W-WLLua.cb2.html >WLLua</a></div></div><div  class=cdline ><div  class=cdrinum >158c</div><div  class=cdmcmd >       W !</div></div><div  class=cdline ><div  class=cdrinum >159c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >160c</div><div  class=cdmcmd >;*  Write one item ala Lua Loup format for comparison</div></div><div  class=cdline ><div  class=cdrinum >161c</div><div  class=cdmcmd >; WNa substitutes full Lua name</div></div><div  class=cdline ><div  class=cdrinum >162c</div><div  class=cdmcmd >; @<a href=CB-epaIMG-itemFL.cb2.html >itemFL</a>, Si,Sj,  runa, <a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>, dot, IPs</div></div><div  class=cdline ><div  class=cdrinum >163c</div><div  class=cdmcmd ><a href=CB-ep4W-WLLua.cb2.html >WLLua</a>()  ;</div></div><div  class=cdline ><div  class=cdrinum >164c</div><div  class=cdmcmd >       NEW ti,tok</div></div><div  class=cdline ><div  class=cdrinum >165c</div><div  class=cdmcmd >       W Lna," ",?8," -&gt; "</div></div><div  class=cdline ><div  class=cdrinum >166c</div><div  class=cdmcmd >       F ti=1:1:$L(<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,",")+1 S tok=$P(<a href=CB-ep4HGR-ruLst.cb2.html >ruLst</a>,",",ti) DO</div></div><div  class=cdline ><div  class=cdrinum >167c</div><div  class=cdmcmd >         .I (dot)=ti W " *     "</div></div><div  class=cdline ><div  class=cdrinum >168c</div><div  class=cdmcmd >         .I tok="" Q  ; no more tok, extra to do dot at end</div></div><div  class=cdline ><div  class=cdrinum >169c</div><div  class=cdmcmd >         .S ruid=$G(Gxi(tok,1)) I 'ruid S Q="Missing Lna of "_tok Q</div></div><div  class=cdline ><div  class=cdrinum >170c</div><div  class=cdmcmd >         .S tokLna=$G(GRk(ruid,"Lna"))</div></div><div  class=cdline ><div  class=cdrinum >171c</div><div  class=cdmcmd >         .I tokLna="" DO  ;</div></div><div  class=cdline ><div  class=cdrinum >172c</div><div  class=cdmcmd >            ..D b^dv("Err Missing Lna of tok","tokLna,tok,WNa,ti,rulst")</div></div><div  class=cdline ><div  class=cdrinum >173c</div><div  class=cdmcmd >            ..S tokLna=" ??? "</div></div><div  class=cdline ><div  class=cdrinum >174c</div><div  class=cdmcmd >         .W tokLna,$J("",10-$L(tokLna))  ;pad to fixed width</div></div><div  class=cdline ><div  class=cdrinum >175c</div><div  class=cdmcmd >       S LuaIPs=IPs-1</div></div><div  class=cdline ><div  class=cdrinum >176c</div><div  class=cdmcmd >       I IPs="" S LuaIPs="?"</div></div><div  class=cdline ><div  class=cdrinum >177c</div><div  class=cdmcmd >       W ?50,"(",LuaIPs,")",!</div></div><div  class=cdline ><div  class=cdrinum >178c</div><div  class=cdmcmd >       Q</div></div><div  class=cdline ><div  class=cdrinum >179c</div><div  class=cdmcmd >;*</div></div><div  class=cdline ><div  class=cdrinum >180c</div><div  class=cdmcmd >;*   INc()   <a href=CB-TOIpd-itb.cb2.html >Itb</a>()</div></div><div  class=cdline ><div  class=cdrinum >181c</div><div  class=cdmcmd ><a href=CB-ep4W-WIN.cb2.html >WIN</a>   W:$X ! W !,"Inputs-"   NEW wi</div></div><div  class=cdline ><div  class=cdrinum >182c</div><div  class=cdmcmd >      I $G(Ins) W !,"In str '",Ins,"'  "</div></div><div  class=cdline ><div  class=cdrinum >183c</div><div  class=cdmcmd >      W !,"Ip: " F wi=1:1:INc W ?<a href=CB-TOIpd-itb.cb2.html >Itb</a>(wi),wi," "</div></div><div  class=cdline ><div  class=cdrinum >184c</div><div  class=cdmcmd >      W !,"lit " F wi=1:1:INc W ?<a href=CB-TOIpd-itb.cb2.html >Itb</a>(wi),INc(wi)," "</div></div><div  class=cdline ><div  class=cdrinum >185c</div><div  class=cdmcmd >      W !</div></div><div  class=cdline ><div  class=cdrinum >186c</div><div  class=cdmcmd >      Q</div></div><div  class=cdline ><div  class=cdrinum >187c</div><div  class=cdmcmd >;* Copy from ^dvs  same <a href=CB-dzroz-as.cb2.html >as</a> ^dvc</div></div><div  class=cdline ><div  class=cdrinum >188c</div><div  class=cdmcmd > ;Replace all dbl spaces (or more) with single, and remove starting/ending</div></div><div  class=cdline ><div  class=cdrinum >189c</div><div  class=cdmcmd ><a href=CB-ep4W-DSP.cb2.html >DSP</a>(X) NEW i F i=0:1 Q:X'["  "  S X=$P(X,"  ")_" "_$P(X,"  ",2,9999)</div></div><div  class=cdline ><div  class=cdrinum >190c</div><div  class=cdmcmd > Q $$<a href=CB-ep4W-TSP.cb2.html >TSP</a>(X)</div></div><div  class=cdline ><div  class=cdrinum >191c</div><div  class=cdmcmd > ; Remove <a href=CB-KGD-start.cb2.html >start</a> and end spaces (only)</div></div><div  class=cdline ><div  class=cdrinum >192c</div><div  class=cdmcmd ><a href=CB-ep4W-TSP.cb2.html >TSP</a>(X) NEW i S X=$<a href=CB-dzIzro-TR.cb2.html >TR</a>(X,$C(9)_$C(10)_$C(13),"   ")  ;replace tab,lf,cr with space</div></div><div  class=cdline ><div  class=cdrinum >193c</div><div  class=cdmcmd > I $E($G(X))=" " F i=1:1:$L(X) I $E(X,i)'=" " S X=$E(X,i,999) Q</div></div><div  class=cdline ><div  class=cdrinum >194c</div><div  class=cdmcmd > I $E(X,$L(X))=" " F i=$L(X):-1:1 I $E(X,i)'=" " S X=$E(X,1,i) Q</div></div><div  class=cdline ><div  class=cdrinum >195c</div><div  class=cdmcmd > I X=" " S X=""  ; Funny case all spaces  vs end i=0 second <a href=CB-hghTemplate-line.cb2.html >line</a> ?</div></div><div  class=cdline ><div  class=cdrinum >196c</div><div  class=cdmcmd > Q X</div></div><div  class=cdline ><div  class=cdrinum >197c</div><div  class=cdmcmd >;* </div></div></div><div  class=ft >by ^mwHmr 28 APR 2023 03:28 AM</div><h3> 28APR2023 03:28   by ^hgh</h3>
</body>
</html>
